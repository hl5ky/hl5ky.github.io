<!DOCType HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#" manifest="cache.manifest">
<head>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width" />
<title>한글 평문 연습</title>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.8/codemirror.css'>
<script>
window.console = window.console || function(t) {};
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.8/codemirror.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.8/mode/xml/xml.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.8/addon/selection/mark-selection.js'></script>
<script type="text/javascript">
/*! hangul-js 2019-12-10 */
!function(){"use strict";var r,d,g,l,t,e,h=["ㄱ",["ㄱ","ㄱ"],"ㄴ","ㄷ",["ㄷ","ㄷ"],"ㄹ","ㅁ","ㅂ",["ㅂ","ㅂ"],"ㅅ",["ㅅ","ㅅ"],"ㅇ","ㅈ",["ㅈ","ㅈ"],"ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],p=["ㅏ","ㅐ","ㅑ",["ㅑ","ㅣ"],"ㅓ","ㅔ","ㅕ",["ㅕ","ㅣ"],"ㅗ",["ㅗ","ㅏ"],["ㅗ","ㅐ"],["ㅗ","ㅣ"],"ㅛ","ㅜ",["ㅜ","ㅓ"],["ㅜ","ㅔ"],["ㅜ","ㅣ"],"ㅠ","ㅡ",["ㅡ","ㅣ"],"ㅣ"],C=["","ㄱ",["ㄱ","ㄱ"],["ㄱ","ㅅ"],"ㄴ",["ㄴ","ㅈ"],["ㄴ","ㅎ"],"ㄷ","ㄹ",["ㄹ","ㄱ"],["ㄹ","ㅁ"],["ㄹ","ㅂ"],["ㄹ","ㅅ"],["ㄹ","ㅌ"],["ㄹ","ㅍ"],["ㄹ","ㅎ"],"ㅁ","ㅂ",["ㅂ","ㅅ"],"ㅅ",["ㅅ","ㅅ"],"ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],A=44032;function n(n){for(var r=n.length,t={0:0},e=0;e<r;e++)n[e]&&(t[n[e].charCodeAt(0)]=e);return t}function o(n){for(var r,t,e=n.length,o={},i=0;i<e;i++)r=n[i][0].charCodeAt(0),t=n[i][1].charCodeAt(0),void 0===o[r]&&(o[r]={}),o[r][t]=n[i][2].charCodeAt(0);return o}function v(n){return void 0!==r[n]}function y(n){return void 0!==d[n]}function m(n){return void 0!==g[n]}function u(n){return void 0!==l[n]}function j(n){return 44032<=n&&n<=55203}function b(n,r){return!(!e[n]||!e[n][r])&&e[n][r]}function S(n,r){return!(!t[n]||!t[n][r])&&t[n][r]}r=n(["ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄸ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅃ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]),d=n(["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]),g=n(["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"]),l=n(["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]),t=o([["ㄱ","ㅅ","ㄳ"],["ㄴ","ㅈ","ㄵ"],["ㄴ","ㅎ","ㄶ"],["ㄹ","ㄱ","ㄺ"],["ㄹ","ㅁ","ㄻ"],["ㄹ","ㅂ","ㄼ"],["ㄹ","ㅅ","ㄽ"],["ㄹ","ㅌ","ㄾ"],["ㄹ","ㅍ","ㄿ"],["ㄹ","ㅎ","ㅀ"],["ㅂ","ㅅ","ㅄ"],["ㄱ","ㄱ","ㄲ"],["ㄷ","ㄷ","ㄸ"],["ㅂ","ㅂ","ㅃ"],["ㅅ","ㅅ","ㅆ"],["ㅈ","ㅈ","ㅉ"]]),e=o([["ㅗ","ㅏ","ㅘ"],["ㅗ","ㅐ","ㅙ"],["ㅗ","ㅣ","ㅚ"],["ㅜ","ㅓ","ㅝ"],["ㅜ","ㅔ","ㅞ"],["ㅜ","ㅣ","ㅟ"],["ㅡ","ㅣ","ㅢ"]]);function w(n,r){if(null===n)throw new Error("Arguments cannot be null");"object"==typeof n&&(n=n.join(""));for(var t,e,o,i,u,f=[],c=n.length,a=0;a<c;a++){var s=[];j(i=n.charCodeAt(a))?(e=((i-=A)-(o=i%28))/28%21,t=parseInt((i-o)/28/21),"object"==typeof h[t]?s=s.concat(h[t]):s.push(h[t]),"object"==typeof p[e]?s=s.concat(p[e]):s.push(p[e]),0<o&&("object"==typeof C[o]?s=s.concat(C[o]):s.push(C[o]))):v(i)?"string"==typeof(u=y(i)?h[d[i]]:C[l[i]])?s.push(u):s=s.concat(u):m(i)?"string"==typeof(u=p[g[i]])?s.push(u):s=s.concat(u):s.push(n.charAt(a)),r?f.push(s):f=f.concat(s)}return f}function i(n){return"string"!=typeof n?"":(n=w(n)).join("")}function f(c){"string"==typeof c&&(c=w(c));var n,r,a=[],t=c.length,e=0,s=-1,h=!1;function o(n){var r,t,e,o,i=0,u="";if(h=!1,!(n<s+1))for(var f=1;;f++){if(1===f){if(m(r=c[s+f].charCodeAt(0)))return s+f+1<=n&&m(t=c[s+f+1].charCodeAt(0))?a.push(String.fromCharCode(b(r,t))):a.push(c[s+f]),void(s=n);if(!y(r))return a.push(c[s+f]),void(s=n);u=c[s+f]}else if(2===f){if(y(t=c[s+f].charCodeAt(0)))return r=S(r,t),u=String.fromCharCode(r),a.push(u),void(s=n);u=String.fromCharCode(28*(21*d[r]+g[t])+A)}else 3===f?(b(t,e=c[s+f].charCodeAt(0))?t=b(t,e):i=e,u=String.fromCharCode(28*(21*d[r]+g[t])+l[i]+A)):4===f?(i=S(i,o=c[s+f].charCodeAt(0))?S(i,o):o,u=String.fromCharCode(28*(21*d[r]+g[t])+l[i]+A)):5===f&&(i=S(i,o=c[s+f].charCodeAt(0)),u=String.fromCharCode(28*(21*d[r]+g[t])+l[i]+A));if(n<=s+f)return a.push(u),void(s=n)}}for(var i=0;i<t;i++)y(n=c[i].charCodeAt(0))||m(n)||u(n)?(0===e?y(n)?e=1:m(n)&&(e=4):1==e?m(n)?e=2:S(r,n)?e=5:o(i-1):2==e?u(n)?e=3:m(n)?b(r,n)||(o(i-1),e=4):(o(i-1),e=1):3==e?u(n)?!h&&S(r,n)?h=!0:(o(i-1),e=1):y(n)?(o(i-1),e=1):m(n)&&(o(i-2),e=2):4==e?m(n)?b(r,n)?(o(i),e=0):o(i-1):(o(i-1),e=1):5==e&&(e=m(n)?(o(i-2),2):(o(i-1),1)),r=n):(o(i-1),o(i),e=0);return o(i-1),a.join("")}function c(n){this.string=n,this.disassembled=w(n).join("")}c.prototype.search=function(n){return w(n).join("").indexOf(this.disassembled)};var a={disassemble:w,d:w,disassembleToString:i,ds:i,assemble:f,a:f,search:function(n,r){var t=w(n).join(""),e=w(r).join("");return t.indexOf(e)},rangeSearch:function(n,r){var t,e=w(n).join(""),o=w(r).join(""),i=w(n,!0),u=new RegExp(o,"gi"),f=[];if(!r.length)return[];for(;t=u.exec(e);)f.push(t.index);return f.map(function(n){return[function(n){for(var r=0,t=0;r<i.length;++r)if(n<(t+=i[r].length))return r}(n),function(n){for(var r=0,t=0;r<i.length;++r)if(t+=i[r].length,n+o.length<=t)return r}(n)]})},Searcher:c,endsWithConsonant:function(n){"object"==typeof n&&(n=n.join(""));var r=n.charCodeAt(n.length-1);if(j(r)){if(0<(r-=A)%28)return!0}else if(v(r))return!0;return!1},endsWith:function(n,r){return w(n).pop()===r},isHangul:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),j(n)},isComplete:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),j(n)},isConsonant:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),v(n)},isVowel:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),m(n)},isCho:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),y(n)},isJong:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),u(n)},isHangulAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!j(n.charCodeAt(r)))return!1;return!0},isCompleteAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!j(n.charCodeAt(r)))return!1;return!0},isConsonantAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!v(n.charCodeAt(r)))return!1;return!0},isVowelAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!m(n.charCodeAt(r)))return!1;return!0},isChoAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!y(n.charCodeAt(r)))return!1;return!0},isJongAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!u(n.charCodeAt(r)))return!1;return!0}};"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module?module.exports=a:window.Hangul=a}();
</script>
<style>
body {
    background-color: white ;
    font-family: 'Helvetica', 'sans serif';
    font-size: medium;
	line-height: 1.5;
    min-width: 760px;
    margin: 0 auto;
}
.page {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
    padding: 1em;
}
p {
    padding: 4px;
    background: white;
    color: black;
}
input {
    padding: 4px;
    border: 1px solid lightsalmon;
    transition: box-shadow 0.3s;
    background: lightyellow;
    border-radius: 5px;
    color: black;
    font-family: 'Helvetica', 'sans serif';
    font-size: large;
}

input:focus { 
    border: 1px solid teal;
    box-shadow: 0 0 5px 1px powderblue;
}
button {
    color: black;
    font-family: 'Helvetica', 'sans serif';
    font-size: large;
    font-weight: bold;
    margin-top: 6px;
}
#play {
    color: blue;
}
#stop {
    color: red;
}
#freq { 
    width: 3em;
}
#speed {
    width: 3em;
}
#volume {
    width: 3em;
}
textarea {
    width : 100%;
    height : auto;
    padding: 10px;
    border: 1px solid lightsalmon;
    transition: box-shadow 0.3s;
    background: lightyellow;
    border-radius: 5px;
    color: black;
    font-family: 'Helvetica', 'sans serif';
    font-size: x-large;
    font-weight: bold;
    line-height: 1.5;
}
#counter {
    float: right;
}
.font_medium {
    font-size : medium;
}
.setting {
    line-height: 2;
    margin-top: 0px;    
}
.setting_bold {
    font-weight: 600;
}
.setting_group {
    padding: 4px 0px 4px 10px;
    margin-right: 10px;
    border: 1px dotted teal;
    white-space: nowrap;
}
.setting_group_2 {
    margin-right: 10px;
    white-space: nowrap;
}
.sample_group > button {
    margin-top: 7px;
    margin-bottom: 4px;
}
::selection {
    background-color: rgba(255, 0, 0, 0.5);
}
.hidden_sample {
    display : none;
}

.CodeMirror {
    width : 100%;
    height : 12em;
    padding: 10px;
    border: 1px solid lightsalmon;
    transition: box-shadow 0.3s;
    background: lightyellow;
    border-radius: 5px;
    color: black;
    font-family: 'Helvetica', 'sans serif';
    font-size: x-large;
    font-weight: bold;
    line-height: 1.5;
    margin-top: 20px;
}
.CodeMirror-selected { background-color: rgba(255, 0, 0, 0.5); }
.CodeMirror-focused .CodeMirror-selected { background-color: rgba(255, 0, 0, 0.5); }
.hide_markText { background-color: black; }
.show_markText { background-color: inherit; }

.log_container_ditdah {
    width : 100%;
    height : 12px;
    overflow: hidden;
    padding: 10px;
    border: 1px solid lightsalmon;
    transition: box-shadow 0.3s;
    background: lightyellow;
    border-radius: 5px;
    color: black;
    font-family: 'monospace';
    font-size: small;
    white-space: nowrap;
    margin-top: 0px;
}
#ditdah {
    height:10px;
    float: right;
}
.ditdah_bar {
    background: green;
    height: 10px;
    display: inline-block;
}
.ditdah_gap {
    height: 10px;
    display: inline-block;
}
#keyer_setting {
    display: none;
    line-height: 2;
}
#connect {
    color: blue;
}
#disconnect {
    color: red;
}
#mp3 {
	display: inline-block;
	margin: auto;
	padding-left: 10px;
}
audio {
	height: 1em;
	margin-bottom: -3px;
}
</style>
</head>
<body>
<div class="page">

<p><span style="font-size:200%"><b>한글 평문 연습 (속도 조절)</b></span>
    <span style="font-size:150%">&nbsp;</span>
</p>

<div class="setting">
    <span class="setting_group_2">
        <button id="play">PLAY</button>&nbsp;
        <button id="stop">STOP</button>
        </span>   

<span class="setting_group_2">
<span class="setting_bold">음색</span> <input type="number" id="freq" value="650" step="10" size="4" min="200" max="1200" /> Hz
&nbsp;
<span class="setting_bold">속도</span> <input type="number" id="speed" value="10" size="2" min="5" max="50" /> WPM &nbsp;
<span class="setting_bold">음량</span> <input type="number" id="volume" value="50" size="3" min="1" max="100" step="1" /> %
</span>
<br>
</span>
<span class="setting_group">
<span class="setting_bold">부호간격</span> : 
<label><input type="radio" name="key" value="computer" /> 정상</label>&nbsp;
<label><input type="radio" name="key" value="space_1" /> 1></label>&nbsp;
<label><input type="radio" name="key" value="space_2" /> 2>></label>&nbsp;
<label><input type="radio" name="key" value="space_3" checked /> 3>>></label>&nbsp;
<label><input type="radio" name="key" value="space_4" /> 4>>>></label>&nbsp;
<label><input type="radio" name="key" value="space_5" /> 5>>>>></label>&nbsp;
</span>&nbsp;&nbsp;&nbsp;

<span class="setting_group">
<span class="setting_bold">글자숨기기</span> : 
<label id="selection_only" ></label>
<label><input type="checkbox" id="hide_now" onchange="onChangeHideNow();"> 항상</label>&nbsp;
<label><input type="checkbox" id="hide_text"> PLAY할때</label>&nbsp;
<label><input type="checkbox" id="highlight_slowly"> 한글자씩보기</label>
<label id="flute"></label>
<label id="noise"></label>
<label id="fading"></label>&nbsp;
</span>&nbsp;&nbsp;

<span class="setting_group">
<label><input type="checkbox" id="repeat" > 연속 반복</label>&nbsp;&nbsp;
</span>
</div>


<div>
<span class="sample_group">
<!--button style="background-color:rgb(240, 250, 200);" onClick="location.href='/morse/practice/eng-1.html'">&nbsp;1단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-2.html'">&nbsp;2단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-3.html'">&nbsp;3단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-4.html'">&nbsp;4단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-5.html'">&nbsp;5단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-6.html'">&nbsp;6단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-7.html'">&nbsp;7단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-8.html'">&nbsp;8단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-9.html'">&nbsp;9단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-10.html'">&nbsp;10단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-11.html'">&nbsp;11단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-12.html'">&nbsp;12단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-13.html'">&nbsp;13단계&nbsp;</button>&nbsp;
<button style="color:rgb(80, 80, 80);" onClick="location.href='/morse/practice/eng-14.html'">&nbsp;14단계&nbsp;</button-->

<label id="hangul_qso_1"></label>
<label id="user_qso"></label>

</span>
</div>

<div class="log_container_ditdah"><span id="ditdah"></span></div>

<button id="sub_menu_1" style="background-color:rgb(240, 250, 200);">1 한 문단</button>&nbsp;
<button id="sub_menu_2" style="background-color:rgb(240, 250, 200);">2 두 문단</button>&nbsp;
<button id="sub_menu_3" style="background-color:rgb(240, 250, 200);">3 세 문단</button>&nbsp;
<button id="sub_menu_4" style="background-color:rgb(240, 250, 200);">4 네 문단</button>&nbsp;
<button id="sub_menu_5" style="background-color:rgb(240, 250, 200);">5 다섯 문단</button>&nbsp;
<button id="sub_menu_6" style="background-color:rgb(240, 250, 200);">6 여섯 문단</button>
<!--button id="sub_menu_7" style="background-color:rgb(240, 250, 200);">7 호출부호 (10/3)</button-->


<!--  hangul_txt_1         -->
<textarea id="hangul_txt_1" rows="10">

[[ 간단 사용 설명서 ]]

- 사각 메뉴 ( 한 문장, 두 문장...)를 클릭하면 문장이 만들어짐.
- 누를 때마다 내용이 바뀜.
- 속도와 부호간격을 조절한 후, PLAY.
</textarea>
<div id="hangul_txt_1_caption"></div>

<!--  user_txt         -->
<textarea id="user_txt" rows="16" class="hidden_sample">
</textarea>
<div id="user_txt_caption" class="hidden_sample">
<label><input type="radio" name="repeat_count" value="1" checked /></label>
</div>

<br>
<!--<button style="color:rgb(70, 70, 70);" onClick="location.href='/morse/kor'">&nbsp;홈페이지로 돌아가기&nbsp;</button>-->
<button style="color:rgb(70, 70, 70);" onClick="window.close()">&nbsp;현재창 닫고 메뉴창으로 돌아가기&nbsp;</button>

<h3> ◆ 프로그램 정보</h3>
<span class="font_medium">
▶ 프로그램의 제작 : DS1TZE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CW Trainer - <a href="https://shingiru.github.io/hangul_cw_trainer.html" target="_blank">https://shingiru.github.io/hangul_cw_trainer.html</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;한글 CW Decoder - <a href="http://shingiru.github.io/hangul_cw_decoder.html" target="_blank">http://shingiru.github.io/hangul_cw_decoder.html</a><br />
<br />
▶ 한글 평문 연습을 위한 재구성 : HL5KY<br />
<br>
❤ 프로그램의 사용을 허용해 주신 DS1TZE님께 감사드립니다.
<br /><br />
</span>

</div>
</body>

<!--script>Mp3LameEncoderConfig = { memoryInitializerPrefixURL: "" };</script-->
<script src="Mp3LameEncoder.min.js"></script>
<script type="text/javascript">
(function(AudioContext) {
    AudioContext.prototype.createEffect = function() {
        var bufferSize = 4096;
        var node = this.createScriptProcessor(bufferSize, 1, 1);
        node.onaudioprocess = function(e) {
            const inputBuffer = e.inputBuffer;
            const outputBuffer = e.outputBuffer;

            // Loop through the output channels (in this case there is only one)
            for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {
                const inputData = inputBuffer.getChannelData(channel);
                const outputData = outputBuffer.getChannelData(channel);

                // Loop through the 4096 samples
                for (let sample = 0; sample < inputBuffer.length; sample++) {
                    // make output equal to the same as the input
                    outputData[sample] = inputData[sample];

                    // add noise to each output sample
                    if (useNoise) outputData[sample] += ((Math.random() * 2) - 1) * 0.9; //  white noise. 0.2 noise strength 
                }
            }
        }
        return node;
    };
    
    AudioContext.prototype.createWhiteNoise = function(bufferSize) {
        bufferSize = bufferSize || 4096;
        var node = this.createScriptProcessor(bufferSize, 1, 1);
        node.onaudioprocess = function(e) {
            var output = e.outputBuffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                output[i] = Math.random() * 2 - 1;
            }
        }
        return node;
    };

    AudioContext.prototype.createPinkNoise = function(bufferSize) {
        bufferSize = bufferSize || 4096;
        var b0, b1, b2, b3, b4, b5, b6;
        b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;
        var node = this.createScriptProcessor(bufferSize, 1, 1);
        node.onaudioprocess = function(e) {
            var output = e.outputBuffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                var white = Math.random() * 2 - 1;
                b0 = 0.99886 * b0 + white * 0.0555179;
                b1 = 0.99332 * b1 + white * 0.0750759;
                b2 = 0.96900 * b2 + white * 0.1538520;
                b3 = 0.86650 * b3 + white * 0.3104856;
                b4 = 0.55000 * b4 + white * 0.5329522;
                b5 = -0.7616 * b5 - white * 0.0168980;
                output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;
                output[i] *= 0.11; // (roughly) compensate for gain
                b6 = white * 0.115926;
            }
        }
        return node;
    };

    AudioContext.prototype.createBrownNoise = function(bufferSize) {
        bufferSize = bufferSize || 4096;
        var lastOut = 0.0;
        var node = this.createScriptProcessor(bufferSize, 1, 1);
        node.onaudioprocess = function(e) {
            var output = e.outputBuffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
                var white = Math.random() * 2 - 1;
                output[i] = (lastOut + (0.02 * white)) / 1.02;
                lastOut = output[i];
                output[i] *= 3.5; // (roughly) compensate for gain
            }
        }
        return node;
    };
})(window.AudioContext);

</script>
<script type="text/javascript">
MorseNode.prototype.MORSE = {
    "A": ".-",
    "B": "-...",
    "C": "-.-.",
    "D": "-..",
    "E": ".",
    "F": "..-.",
    "G": "--.",
    "H": "....",
    "I": "..",
    "J": ".---",
    "K": "-.-",
    "L": ".-..",
    "M": "--",
    "N": "-.",
    "O": "---",
    "P": ".--.",
    "Q": "--.-",
    "R": ".-.",
    "S": "...",
    "T": "-",
    "U": "..-",
    "V": "...-",
    "W": ".--",
    "X": "-..-",
    "Y": "-.--",
    "Z": "--..",

    "1": ".----",
    "2": "..---",
    "3": "...--",
    "4": "....-",
    "5": ".....",
    "6": "-....",
    "7": "--...",
    "8": "---..",
    "9": "----.",
    "0": "-----",
    
    ".": ".-.-.-",
    ",": "--..--",
    "?": "..--..",
    "/": "-..-.",
    "+": ".-.-.",
    "-": "-....-",
    "=": "-...-",
    ":": "---...",
    ";": "-.-.-.",
    "(": "-.--.",
    ")": "-.--.-",
    "'": ".----.",
    "\"": ".-..-.",
    "@": ".--.-.",
    
    "ㄱ": ".-..",
    "ㄴ": "..-.",
    "ㄷ": "-...",
    "ㄹ": "...-",
    "ㅁ": "--",
    "ㅂ": ".--",
    "ㅅ": "--.",
    "ㅇ": "-.-",
    "ㅈ": ".--.",
    "ㅊ": "-.-.",
    "ㅋ": "-..-",
    "ㅌ": "--..",
    "ㅍ": "---",
    "ㅎ": ".---",
    "ㅏ": ".",
    "ㅑ": "..",
    "ㅓ": "-",
    "ㅕ": "...",
    "ㅗ": ".-",
    "ㅛ": "-.",
    "ㅜ": "....",
    "ㅠ": ".-.",
    "ㅡ": "-..",
    "ㅣ": "..-",
    "ㅔ": "-.--",
    "ㅐ": "--.-",
    
    // for prosign
    "&" : ".-...",
    "Ŝ" : "...-.",
    // non-standard
    "[" : "-...-.-",
    "]" : "...-.-",
    "^" : "-.-.-",
    "※" : "........"
};

MorseNode.prototype.PROSIGN = {
    "<AR>" : "+",
    "<KN>" : "(",
    "<AS>" : "&",
    "<BT>" : "=",
    "<SN>" : "Ŝ",
    // non-standard
    "<BK>" : "[",
    "<SK>" : "]",
    "<VA>" : "]",
    "<KA>" : "^",
    "<HH>" : "※"
};

function MorseNode(ac, rate) {
    // ac is an audio context.
    this._oscillator = ac.createOscillator();
    this._gain = ac.createGain();

    this._gain.gain.value = 0;
    this._oscillator.type = 'sine';
    this._oscillator.frequency.value = 600;
    
    this._oscillator.connect(this._gain);
    this.key = 'computer';

    if ("undefined" == typeof rate)
        rate = 20;
    this._dot = 1.2 / rate; // formula from Wikipedia.

    this._oscillator.start(0);
	this._moved = 0;
}

MorseNode.prototype.connect = function(target) {
    return this._gain.connect(target);
}

MorseNode.prototype.timeMove = function(sec) {
	if (ac.currentTime + this._moved + sec < queue[0][0]) sec = queue[0][0] - ac.currentTime - this._moved;
	else if (ac.currentTime + this._moved + sec > queue[queue.length - 1][0]) sec = queue[queue.length - 1][0] - ac.currentTime - this._moved;
	this._moved += sec;
	
	console.log(sec);
	
	var i = 0;
	for (; i < queue.length; i++)
		if (queue[i][0] > ac.currentTime + this._moved) break;
	
	this._gain.disconnect(filter);
	this._oscillator.disconnect(this._gain);
	this._gain = ac.createGain();
	this._gain.gain.value = 0;
	this._oscillator.connect(this._gain);
	this._gain.connect(filter);
	
	for (; i < queue.length; i++)
		this._gain.gain.setValueAtTime(queue[i][1], queue[i][0] - this._moved);
	
	var min = timestamp[0];
	timestamp.forEach((el, idx, ary) => { ary[idx] = el - sec; });
}

MorseNode.prototype.dotfac = function(t) {
    switch (this.key) {
            // t is type of dotvalue. l=letter int. i=inter el. s=spaces .=dit -=dah 
        case 'computer':
            return 1;
		case 'straightmed': //i and . are rather too long than too short, s the inverse rest is random
            if (t=='.' || t=='i') return Math.random()*0.33+0.95;
            if (t=='s') return Math.random()*0.2+0.85;
            return Math.random()*0.3+0.85;
        case 'straightbad':
            if (t=='.' || t=='i') return Math.random()*0.6+0.8;
            if (t=='s') return Math.random()*0.4+0.7;
            return Math.random()*0.5+0.75;
        case 'straightvbad':
            if (t=='.' || t=='i') return Math.random()*1.6+0.8;
            if (t=='s') return Math.random()*0.85+0.4;
            return Math.random()*0.8+0.6;
        case 'space_1':
			if (t=='s') return 1.6;
            if (t=='l') return 1.6;
        case 'space_2':
			if (t=='s') return 2.2;
            if (t=='l') return 2.2;
        case 'space_3':
			if (t=='s') return 3;
            if (t=='l') return 3;
        case 'space_4':
			if (t=='s') return 4;
            if (t=='l') return 4;            
        case 'space_5':
			if (t=='s') return 5;
            if (t=='l') return 5;            
        case 'farnsworth': //uses farnsworth
            if (t=='s') return 6;
            if (t=='l') return 4;
        case 'elmer': //uses farnsworth
            if (t=='s') return 4;
            if (t=='l') return 1.5;
            return 1;
        }

}

var smoothingDuration = 0.004;  // 10ms is very soft, icom default 4ms;
MorseNode.prototype.playChar = function(queueOnly, t, c, v) {
    for (var i = 0; i < c.length; i++) {
        switch(c[i]) {
        case '.':
            if (!queueOnly) {
				this._gain.gain.setValueAtTime(0, t - smoothingDuration);
				this._gain.gain.linearRampToValueAtTime(1.0 * v, t);
			}
			enQueue(1.0 * v, t);
            t += this._dot * this.dotfac('.');
            if (!queueOnly) {
				this._gain.gain.setValueAtTime(1.0 * v, t - smoothingDuration);
				this._gain.gain.linearRampToValueAtTime(0.0, t);
			}
			enQueue(0.0, t)
            break;
        case '-':
            if (!queueOnly) {
				this._gain.gain.setValueAtTime(0, t - smoothingDuration);
				this._gain.gain.linearRampToValueAtTime(1.0 * v, t);
			}
			enQueue(1.0 * v, t);
            t += 3 * this._dot * this.dotfac('-');
            if (!queueOnly) {
				this._gain.gain.setValueAtTime(1.0 * v, t - smoothingDuration);
				this._gain.gain.linearRampToValueAtTime(0.0, t);
			}
			enQueue(0.0, t)
            break;
        }
        t += this._dot * this.dotfac('i');
    }
    return t;
}

var timestamp = [];
var queue = [];
function enQueue(v, t) {
	queue.push([t, v]);
}
var hasHangul = false;

MorseNode.prototype.playString = function(queueOnly, t, w, v, k, fade) {
    this.key = k;
    
    w = this.convertHangulAndProsign(w.toUpperCase());
    timestamp = [];
	queue = [];
	enQueue(0, 0);
	hasHangul = false;
    
    var start = t, fv = v;
    for (var n = 0; n < w.length; n++) {
        if (fade && (t - start) > 0) { // skip face effect during first 10s
            var pointOneSec = parseInt((t - start) * 10) % 150;
            if (pointOneSec < 75) fv = v * (100 - pointOneSec) * 0.01; // gradually goes down to the quarter volume for 7.5 sec
            else fv = v * (pointOneSec - 50) * 0.01; // gradually goes up to the normal volume for 7.5 sec
        }
        if (!highlightSlowly.checked) timestamp.push(t);
        var c = w[n];
        var hangul = (c.length > 1);
        for (var i = 0; i < c.length; i++) {
            if (c[i] == ' ' || c[i] == '\u00A0') {
                t += 4 * this._dot * this.dotfac('s'); // 3 dots gap already added after ending letter before
            }
            else if ("undefined" != typeof this.MORSE[c[i]]) {
                t = this.playChar(queueOnly, t, this.MORSE[c[i]], fv); // 1 gap after dit/dah
                t += 2 * this._dot * this.dotfac('l'); // with this 2 more gap, whole gap between letter is 3
            }
        }
        if (hangul) {
            t += (2+2) * this._dot * this.dotfac('l');
			hasHangul = true;
        }
        if (highlightSlowly.checked) timestamp.push(t);
    }
    timestamp.push(t);
    
    return t;
}

MorseNode.prototype.convertHangulAndProsign = function(w) {
    // convert prosign
    for (var key in this.PROSIGN) {
        w = w.replace(new RegExp(key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), this.PROSIGN[key]);
    }
    return Hangul.disassemble(w, true);
}

MorseNode.prototype.getSpaceDelayInMills = function() {
    return 1000 * this._dot * (this.dotfac('i') + 2 * this.dotfac('l') + 4 * this.dotfac('s'));
}


var ac, filter, morse = null, vol = 1.0, cwPort = null, cwPortInitialized = false, cwPortOpen = false;

var ua = navigator.userAgent.toLowerCase();
var isIOS = (ua.indexOf("iphone") > -1 || ua.indexOf("ipad") > -1 || ua.indexOf("ipod") > -1);
var isAndroid = ua.indexOf("android") > -1;
var isMobile = (isIOS || isAndroid);

var freq = document.querySelector("#freq")
var wpm = document.querySelector("#speed");
var volume = document.querySelector("#volume");
var play = document.querySelector("#play");
var stop = document.querySelector("#stop");
var keyComputer = document.querySelector('input[name="key"][value="computer"]');
//var keyElmer = document.querySelector('input[name="key"][value="elmer"]');
//var keyFarnsworth = document.querySelector('input[name="key"][value="farnsworth"]');
var keySpace1 = document.querySelector('input[name="key"][value="space_1"]');
var keySpace2 = document.querySelector('input[name="key"][value="space_2"]');
var keySpace3 = document.querySelector('input[name="key"][value="space_3"]');
var keySpace4 = document.querySelector('input[name="key"][value="space_4"]');
var keySpace5 = document.querySelector('input[name="key"][value="space_5"]');
//var keyStraightMed = document.querySelector('input[name="key"][value="straightmed"]');
//var keyStraightBad = document.querySelector('input[name="key"][value="straightbad"]');
//var keyStraightVBad = document.querySelector('input[name="key"][value="straightvbad"]');
var flute = document.querySelector("#flute");
var noise = document.querySelector("#noise");
var fading = document.querySelector("#fading");
var selectionOnly = document.querySelector("#selection_only");
var highlightSlowly = document.querySelector("#highlight_slowly");
var hideText = document.querySelector("#hide_text");
var repeat = document.querySelector("#repeat");


function renewMorse() {
    ac = (ac || new AudioContext());
    if (ac.state != "running") ac.resume();

    if (morse != null) morse._oscillator.stop(0);
    morse = new MorseNode(ac, parseInt(wpm.value));
    
    filter = ac.createBiquadFilter(); 
    filter.frequency.value = freq.value;
    filter.Q.value = 0;
    
    morse.connect(filter);
    filter.connect(ac.destination);
    
    morse._dot = 1.2 / parseFloat(wpm.value);
    morse._oscillator.frequency.value = parseInt(freq.value);
}
var stopped = true, paused = false;
var cm, doc, txtValue, cursorFrom = null, cursorTo, cursorTempFrom, cursorTempTo, cursorTempEnd, highlightStart, hightlightEnd, repeatId = -1, marker = null;
var DELAY_AMOUNT = 1; // seconds
stop.onclick = function() {
    try { clearTimeout(repeatId); repeatId = -1;}
    catch (e) {}
    
    renewMorse();
    if (noiseNode) noiseGain.disconnect();
    morse.playString(false, ac.currentTime, " ", vol, document.querySelector('input[name="key"]:checked').value, fading.checked);
    doc.readOnly = false;
    
    addDitdah(false, 1); // this also manage cw port
	
	clearMarker();
	cm.setOption("extraKeys", {});
    cm.focus();
    if (cursorFrom != null) {
        doc.setSelection(cursorFrom, cursorTo);
        cm.refresh();
    }
    stopped = true;

    play.replaceChild(document.createTextNode("PLAY"), play.firstChild);
    paused = false;
}
var bufferSource = noiseNode = noiseGain = null;
play.onclick = function() {
    if (paused) {
        play.replaceChild(document.createTextNode("PAUSE"), play.firstChild);
        paused = false;
        ac.resume();
        return;
    } else if (stopped == false && repeatId == -1) {
        play.replaceChild(document.createTextNode("RESUME"), play.firstChild);
        paused = true;
        ac.suspend();
        return;
    } else {
        play.replaceChild(document.createTextNode("PAUSE"), play.firstChild);
        paused = false;
    }
    
    try { clearTimeout(repeatId); repeatId = -1;}
    catch (e) {}

    renewMorse();
    
    if (noise.checked) {
        if (bufferSource == null) {
            bufferSource = ac.createBufferSource();
            noiseNode = ac.createWhiteNoise();
            bufferSource.connect(noiseNode);
            noiseGain = ac.createGain();
            noiseNode.connect(noiseGain);
            bufferSource.start(0);
        }
        noiseGain.gain.value = vol * 0.5;
        noiseGain.connect(ac.destination);
    }
    
    clearMarker();
    cm.focus();
    if (cursorFrom != null && !stopped) {
        doc.setSelection(cursorFrom, cursorTo);
        cm.refresh();
        previousTime = 0;
    } else clearDitdah();
    
    cursorFrom = doc.getCursor("from");
    cursorTo = doc.getCursor("to");
    txtValue = doc.getSelection();
    
    var lastLine = doc.lastLine();
    var lastLineLength = doc.getLine(lastLine).length;
    
    if (selectionOnly.checked) {
        if (txtValue == '') { // when no selection  
            if (cursorTo.line == lastLine && cursorTo.ch == lastLineLength) { // when caret is at the end, start from first letter
                txtValue = doc.getValue();
                cursorTempFrom = {line: 0, ch: 0};
                cursorTempTo = {line: 0, ch: 0};
                cursorTempEnd = {line: lastLine, ch: lastLineLength};
            } else { // when caret is in the middle, start from caret position
                doc.setSelection(cursorFrom, {line: lastLine, ch: lastLineLength});
                txtValue = doc.getSelection();
                doc.setSelection(cursorFrom, cursorTo);
                cursorTempFrom = {line: cursorFrom.line, ch: cursorFrom.ch};
                cursorTempTo = {line: cursorFrom.line, ch: cursorFrom.ch};
                cursorTempEnd = {line: lastLine, ch: lastLineLength}
            }
        } else { // play selection
            cursorTempFrom = {line: cursorFrom.line, ch: cursorFrom.ch};
            cursorTempTo = {line: cursorFrom.line, ch: cursorFrom.ch};
            cursorTempEnd = {line: cursorTo.line, ch: cursorTo.ch};
        }
    } else {
        txtValue = doc.getValue();
        cursorTempFrom = {line: 0, ch: 0};
        cursorTempTo = {line: 0, ch: 0};
        cursorTempEnd = {line: lastLine, ch: lastLineLength};
    }
    highlightStart = highlightEnd = 0;
    
    morse.playString(false, ac.currentTime + DELAY_AMOUNT, 
        txtValue, 
        vol * (noise.checked ? 0.5 : 1), 
        document.querySelector('input[name="key"]:checked').value,
        fading.checked);
    
    doc.readOnly = true;

    window.localStorage.setItem('user_txt', userTxt.CodeMirror.doc.getValue());
    
    stopped = false;
    
    cm.focus();
    if (highlightSlowly.checked) doc.setSelection(cursorTempFrom, cursorTempFrom);
    if (hideText.checked) setMarker(cursorTempFrom, cursorTempEnd);
	cm.setOption("extraKeys", { Left: function() {rollback(true);}, Right: function() {rollback(false);} });
    cm.focus();
    
	/*if (selectionOnly.checked == false) repeatId = setTimeout(highlight, DELAY_AMOUNT * 1000);
    else */highlight();
}

function delayedRepeat() {
    if (!stopped) play.click();
}
var previousTime = 0;
function highlight() {
    if (timestamp.length == 0) {
        stop.click();
        if (repeat.checked) {
            stopped = false;
            repeatId = setTimeout(delayedRepeat, 2 * morse.getSpaceDelayInMills());
        }
        return;
    }
    
    if (previousTime != 0) addDitdah(morse._gain.gain.value > 0, parseInt((ac.currentTime - previousTime)*1000));
    previousTime = ac.currentTime;
    
    if (ac.currentTime > timestamp[0] && highlightSlowly.checked) {
        timestamp.shift();
        
        highlightStart = highlightEnd;
        cursorTempFrom.line = cursorTempTo.line, cursorTempFrom.ch = cursorTempTo.ch;
        
        if (txtValue[highlightStart] == '<' && txtValue.length > highlightStart + 3 
            && !!morse.PROSIGN[txtValue.substring(highlightStart, highlightStart + 4).toUpperCase()]) {
            highlightEnd = highlightStart + 4;
            cursorTempTo.ch = cursorTempFrom.ch + 4;
        } else if (txtValue.length > highlightStart) {
            highlightEnd = highlightStart + 1;
            if (txtValue[highlightStart] == '\n') {
                cursorTempTo.line++;
                cursorTempTo.ch = 0;
            } else {
                cursorTempTo.ch = cursorTempFrom.ch + 1;
            }
        }
    
        if (!stopped && cursorTempTo.ch != 0) {
            cm.focus();
            doc.setSelection(cursorTempFrom, cursorTempTo);
                
            if (hideText.checked) {
                setMarker(cursorTempTo, cursorTempEnd);
            }
            
            cm.refresh();
        }
    }
    
    if (!stopped) setTimeout(highlight, 7); // 7ms is based on the sampling rate
}
function setMarker(start, end) {
    clearMarker();
    marker = cm.markText(start, end, {className: "hide_markText"});
}
function clearMarker() {
    if (marker == null) return;
    
    marker.clear();
    marker = null;
}

function rollback(back) {
	if (stopped || morse == null) return;
	morse.timeMove(back ? -5 : 5);
}


var ditdah = document.querySelector("#ditdah");
var last = false, lastWidth = 0;
function addDitdah(bar, len) {
    if (bar == last && ditdah.childNodes.length > 0 && lastWidth < 8192) {
        var span = ditdah.lastChild;
        lastWidth += len;
        span.style.width = (parseInt(lastWidth) >> 3) + "px";
        return;
    }
    var span = document.createElement("SPAN");
    span.className = bar ? "ditdah_bar" : "ditdah_gap";  
    span.style.width = parseInt(len >> 3) + "px";
    ditdah.appendChild(span);
    if (ditdah.childNodes.length > 256) ditdah.removeChild(ditdah.firstChild);
    last = bar;
    lastWidth = len;
	
	if (cwPortOpen) cwPort.setSignals({dataTerminalReady:bar});
}
function clearDitdah() {
    var len = ditdah.childNodes.length;
    for (var i = 0; i < len; i++) ditdah.removeChild(ditdah.firstChild);
    
    previousTime = 0;
}

freq.onchange = function() {
    window.localStorage.setItem('freq', freq.value);
}
wpm.onchange = function() {
    window.localStorage.setItem('wpm', wpm.value);
}
volume.onchange = function() {
    vol = volume.value / 100.0;
    window.localStorage.setItem('volume', volume.value);
}
keyComputer.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
/*keyElmer.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keyFarnsworth.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}*/
keySpace1.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keySpace2.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keySpace3.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keySpace4.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keySpace5.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
/*keyStraightMed.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keyStraightBad.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keyStraightVBad.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}*/
flute.onchange = function() {
	smoothingDuration = flute.checked ? 0.02 : 0.004;
    window.localStorage.setItem('flute', flute.checked);
}
noise.onchange = function() {
    window.localStorage.setItem('noise', noise.checked);
}
fading.onchange = function() {
    window.localStorage.setItem('fading', fading.checked);
}
selectionOnly.onchange = function() {
    window.localStorage.setItem('selection_only', selectionOnly.checked);
}
highlightSlowly.onchange = function() {
    window.localStorage.setItem('highlight_slowly', highlightSlowly.checked);
    if (highlightSlowly.checked == false){
        document.getElementById("highlight_slowly").checked = false;
    }
}
hideText.onchange = function() {
    window.localStorage.setItem('hide_text', hideText.checked);

    if (stopped == false){  // PLAY가 진행중일때는 'PLAY할때' 버튼이 작동하지 않도록 하기 위한 루틴
        if (hideText.checked == true){
            document.getElementById("hide_text").checked = false;
        } else {
            document.getElementById("hide_text").checked = true;
        }
    }
}
repeat.onchange = function() {
    window.localStorage.setItem('repeat', repeat.checked);
}
window.addEventListener('DOMContentLoaded', function() {
    try {
        if (window.localStorage.getItem('freq')) freq.value = parseInt(window.localStorage.getItem('freq'));
        if (window.localStorage.getItem('wpm')) wpm.value = parseInt(window.localStorage.getItem('wpm'));
        if (window.localStorage.getItem('volume')) volume.value = parseInt(window.localStorage.getItem('volume'));
        vol = volume.value / 100.0;
        if (window.localStorage.getItem('flute')) flute.checked = window.localStorage.getItem('flute') == 'true';
		smoothingDuration = flute.checked ? 0.02 : 0.004;
        if (window.localStorage.getItem('noise')) noise.checked = window.localStorage.getItem('noise') == 'true';
        if (window.localStorage.getItem('fading')) fading.checked = window.localStorage.getItem('fading') == 'true';
        if (window.localStorage.getItem('selection_only')) selectionOnly.checked = window.localStorage.getItem('selection_only') == 'true';
        if (window.localStorage.getItem('highlight_slowly')) highlightSlowly.checked = window.localStorage.getItem('highlight_slowly') == 'true';       
        if (window.localStorage.getItem('hide_text')) hideText.checked = window.localStorage.getItem('hide_text') == 'true';
        if (window.localStorage.getItem('repeat')) repeat.checked = window.localStorage.getItem('repeat') == 'true';
        if (window.localStorage.getItem('key')) document.querySelector('input[name="key"][value="'+window.localStorage.getItem('key')+'"]').checked = true;
        if (window.localStorage.getItem('user_txt')) userTxt.CodeMirror.doc.setValue(window.localStorage.getItem('user_txt'));
        if (window.localStorage.getItem('qso_sample')) changeQsoSample(window.localStorage.getItem('qso_sample'));
        else changeQsoSample("hangul_txt_1");
            document.getElementById("hide_now").checked = false;
            document.getElementById("hide_text").checked = true;
            document.getElementById("highlight_slowly").checked = true;
            document.getElementById("repeat").checked = false;
		if (!isAndroid && !isIOS) document.querySelector("#keyer_setting").style.display = "inline";
    } catch (e) {
    }
}, true);

function makeEditor(textArea, display) {
    var editor = CodeMirror(function(el) {
        el.id = textArea.id;
        el.className = el.className + " " + textArea.className;
        textArea.parentNode.replaceChild(el, textArea);
    }, {value: textArea.value, mode: "xml", lineWrapping: true, styleSelectedText: true
		//, extraKeys: { Left: function() {rollback(true);}, Right: function() {rollback(false);} }
	});
}

makeEditor(document.querySelector("#hangul_txt_1"));
makeEditor(document.querySelector("#user_txt"));

var txt = document.querySelector("#hangul_txt_1");
var userTxt = document.querySelector("#user_txt");

var hangulQso1 = document.querySelector("#hangul_qso_1");
var userQso = document.querySelector("#user_qso");

var SubMenu1 = document.querySelector("#sub_menu_1");
var SubMenu2 = document.querySelector("#sub_menu_2");
var SubMenu3 = document.querySelector("#sub_menu_3");
var SubMenu4 = document.querySelector("#sub_menu_4");
var SubMenu5 = document.querySelector("#sub_menu_5");
var SubMenu6 = document.querySelector("#sub_menu_6");
var SubMenu7 = document.querySelector("#sub_menu_7");
//var randomSB = document.querySelector("#sub_menu_4");

function changeQsoSample(newTxtId) {
    var newTxt = document.querySelector("#" + newTxtId);
    //if (txt == newTxt) return;

    var txtCaption = document.querySelector("#" + txt.id + "_caption");
    var newTxtCaption = document.querySelector("#" + newTxtId + "_caption");
    if (!txtCaption || !newTxtCaption) return;
    
    if (!stopped) stop.click();
    cursorFrom = null;
    
    txt.style.display = "none";
    txtCaption.style.display = "none";
    
    txt = newTxt;
    txtCaption = newTxtCaption;
    
    txt.style.display = "block";
    txtCaption.style.display = "block";
    
    txt.classList.toggle('active');
    cm = txt.CodeMirror;
    doc = cm.doc;
    cm.refresh();

    window.localStorage.setItem('qso_sample', newTxtId);
    window.localStorage.setItem('user_txt', userTxt.CodeMirror.doc.getValue());
}
hangulQso1.onclick = function() {
    changeQsoSample("hangul_txt_1");
}
userQso.onclick = function() {
    changeQsoSample("user_txt");
}

function getRepeatCount() {
    return parseInt(document.querySelector('input[name="repeat_count"]:checked').value);
}

//<span class="setting_bold">속도</span> <input type="number" id="speed" value="20" size="2" min="5" max="50" /> WPM

var Phrases = [
"창피한 것도 모르고 체면도 없는 사람의 나이는 넉살. 바나나가 웃으면 바나나킥. 호랑이에게 덤벼드는 용감한 개 이름은 하룻강아지. 이혼의 결정적인 원인은 결혼.",
"서울시민 모두가 동시에 외치면 천만의 말씀이 된다. 아몬드가 죽으면 다이아몬드. 고릴라가 인간을 돌맹이 취급하던 시대는 고인돌시대. 당근이 헌혈하고 나오면 무.",
"도둑이 가장 싫어하는 아이스크림은 누가바. 못 팔고도 돈 번 사람은 철물점 주인. 가만히 있는데 잘 돈다고 하는 것은 머리. 중학생과 고등학생이 타는 차는 중고차.",
"재수가 없으려면 계속해서 일이 안 되게만 된다. 도둑을 맞으려면 개도 안 짖는다. 죽었다 깨어나도 하지 못하는 것은 죽었다 깨어나는 것. 사과를 파먹으면 파인애플.",
"누구나 즐겁게 웃으며 읽는 글은 싱글벙글. 말은 말인데 타지 못하는 말은 거짓말. 약은 약인데 아껴 먹어야 하는 약은 절약. 초고추장보다 높은 사람은 태양초고추장.",
"터이타닉의 구명 보트에는 9명이 탈수 있다. 본디 내 것인데 남이 쓰는 것은 이름. 청천벽력 생각지 않았던 무서운 일 갑자기 일어난 큰 사건이나 이변을 비유한 고사성어.",
"고기 먹을 때마다 따라오는 개는 이쑤시개. 떡 중에 가장 빨리 먹는 떡은 헐레벌떡. 아이스크림이 교통사고가 난 이유는 차가와서. 세상에서 가장 뜨거운 바다는 열바다.",
"물은 물인데 사람들이 가장 좋아하는 물은 선물. 언제나 말다툼이 있는 곳은 경마장. 신혼부부가 가장 좋아하는 곤충은 잠자리. 초등학생이 가장 좋아하는 동네는 방학동.",
"사람의 몸무게가 가장 많이 나갈 때는 철들 때. 사람이 먹을 수 있는 제비는 수제비. 사람이 일생동안 가장 많이 하는 소리는 숨소리. 세 사람만 탈 수 있는 차는 인삼차.",
"차재두량 수레에 싣고 말로 잰다는 뜻 아주 흔하거나 쓸모없는 평범한 것만이 많이 있음. 라면은 라면인데 달콤한 라면은 그대와 함께라면. 못사는 사람들이 하는 직업은 목수.",
"물고기 중에서 가장 학벌이 좋은 물고기는 고등어. 높은 곳에서 애를 낳으면 하이애나. 보잘것 없는 작은 일에 지나치게 큰 대책을 세움. 묵은 묵인데 먹지 못하는 묵은 침묵.",
"천려일실 지혜로운 사람이라도 많은 생각을 하다보면 하나쯤은 실책이 있을 수 있다는 말. 닭에게는 보석이 보리알만 못하다. 잘 해줘도 욕 얻어먹으니 수준에 맞게 해 주는게 좋다.",
"개미네 집 주소는 허리도 가늘군 만지면 부러지리. 노란 당근이 무게가 더 나가면 황당무계. 조령모개 아침에 영을 내리고 저녁에 고친다는 말로 일관성이 없는 정책을 빗대어 쓰는 말이다.",
"누워서 떡 먹기보다 쉬운것은 누위서 떡 안먹기. 씨름 선수들이 죽 늘어서 있는 것은 장사진. 아무리 성미가 느리고 순한듯한 사람도 화가 나면 상당히 무섭다. 느린 소도 성낼 적이 있다.",
"타산지석 다른 사람의 하찮은 언행일지라도 자기의 지덕을 연마하는 데에 도움이 된다는 말. 경국지색 나라를 기울일만한 여자 첫눈에 반할만큼 매우 아름다운 여자. 의리의 사나이는 의사.",
"저능아를 얕보지 마 저력있고 능력있는 아이니까. 과유불급 또는 중용 지나침은 모자람과 같다. 하루에 두 시간 이상 텔레비젼을 시청하면 평균 1년 이상 수명이 짧아진다. 모기 보고 칼 뺀다.",
"촌철살인 한 치의 쇠로 사람을 죽인다 간단한 경구로 어떤 일의 급소를 찔러 사람을 감동시킴을 비유. 결초보은 풀을 묶어서 은혜를 갚는다는 뜻으로 죽어 혼이 되더라도 입은 은혜를 잊지 않고 갚는다.",
"명불허전 자고로 사람의 이름은 결코 헛되이 전해지는 법이 없다. 모든 것이 평범한 학생은 모범생. 괄목상대 눈을 비비고 보며 상대를 대한다. 한동안 못 본 사이에 상대방이 놀랄 정도로 발전하였다.",
"불이 붙은 촛불 때문에 세계적으로 만오천채의 집이 화재로 피해를 보았다. 진짜 새의 이름은 참새. 증삼살인 터무니없는 말이라도 여러 사람이 되풀이하면 결국에는 믿지 않을 수 없게 된다는 뜻.",
"다가올 결과를 생각해 가면서 모든 것을 미리 살피고 일을 처리하라. 누울 자리 봐 가며 발 뻗어라. 매트리스는 진드기의 배설물로 인해 십년 후 평균 두배의 무게가 된다. 눈이 녹아서 되는 것은 눈물.",
"형설지공 갖은 고생을 하며 부지런히 학문을 닦은 공. 호가호위 남의 권세를 빌려 위세를 부림의 비유. 금은 금인데 도둑고양이에게 가장 어울리는 금은 야금야금. 창으로 찌르려고 할 때 하는 말은 창피해.",
"동물중에 직간접적으로 가장 인간을 많이 죽인 동물은 사슴이다. 먹고 살기 위해 하는 내기는 모내기. 지록위마 윗사람을 농락하여 권세를 마음대로 하는 것. 지성여신 지극한 정성은 신의 능력을 발휘한다.",
"평균적으로 여성은 하루 60회 웃지만 남성은 단 10회 밖에 웃지 않는다. 시험지는 진짜 문제 투성이. 나쁜 사람에게 나쁜 일을 할 기회를 만들어 주고 자신이 도리어 손해를 입었다. 도둑놈 문 열어 준 셈.",
"일반적인 사무실의 책상위에는 화장실보다 사백배의 세균들이 숨어있다. 목수도 고칠 수 없는 것은 고집. 상어보다도 하마가 인간에게 훨씬 더 위협적인 동물이라고 한다. 노총각들이 가장 좋아하는 감은 색싯감.",
"파죽지세 세력이 강대하여 큰 적을 거침없이 물리치고 쳐들어가는 기세. 호남형이란 호떡 같이 생긴 남자. 앞에 와서 좋은 말만 하고 살살 비위를 맞추기에 급급한 사람일수록 보이지 않는 데서 험담을 하고 음해한다.",
"풍수지탄 효도를 다 하지 못한 자식의 슬픔. 파죽지세 대적을 거침없이 물리치고 쳐들어가는 당당한 기세. 인간의 평균수명이 80이라면 25년은 수면으로 7년은 식사시간으로 보낸다. 보내기 싫으면 가위나 보를 낸다.",
"누구나 마음속으로만 애태울 것이 아니라 말을 하여야 한다는 뜻으로 말을 함. 말 안 하면 귀신도 모른다. 되면 좋고 안돼도 크게 아쉽다거나 안타까울 것이 없는 것은 배부른 흥정. 눈사람의 반대말은 일어선 사람.",
"러시아에서는 떨어진 고드름으로 매년 백명 이상이 사망하고 있다. 개는 개인데 잡을 수 없는 개는 무지개. 남미 연안의 갈라파고스에는 다른 새의 피를 마시는 핀치새가 살고 있다. 겨울에 많이 쓰는 끈은 따끈따끈.",
"독거미에 물려 죽는 사람보다 샴페인 코르크가 날아가 죽는 사람이 더 많다. 이상한 사람들이 모이는 곳은 치과. 샌프란시스코에 있는 금문교는 세계에서 가장 많은 자살자가 있는 다리이다. 눈 때리고 코 때리는 것은 눈치코치.",
"공포 영화를 보면 강한 스트레스로 인해서 30분 걷기 운동과 같은 칼로리가 소비된다. 정삼각형의 동생은 정삼각. 창해일속 푸른 바닷속에 있는 좁쌀 한 톨이라는 뜻 크고 넓은 것 가운데 있는 아주 작고 보잘것없는 것을 의미.",
"금상첨화 비단 위에 꽃을 더한다 좋은 일에 좋은 일이 겹친다. 일거양득 한 가지 일을 하여 두 가지 이익을 거둠. 원자력발전소의 사진에서 보이는 흰 연기는 수증기이며 공기오염과 상관없다. 문은 문인데 닫지 못하는 문은 소문.",
"먹으면 죽는데 안 먹을 수 없는 것은 나이. 삼고초려 사람의 일은 오직 정성을 다하는 것에서 좋은 결실을 맺을수 있다. 물 없는 사막에서도 할 수 있는 물놀이는 사물놀이. 별 중에 가장 슬픈 별은 이별. 서로 진짜라고 우기는 것은 옥신각신.",
"조삼모사 똑 같은 것을 가지고 어리석은 자를 우롱하는 임시변통의 사기술 간사한 꾀로 남을 속여 희롱함을 이르는 말. 물은 물인데 사람들이 가장 무서워하는 물은 괴물. 겨울에 많이 쓰는 끈은 따끈따끈. 추장보다 높은 사람은 고추장.",
"장에 가려고 망건을 쓰고 나서니까 장이 끝났다는 말은 망건 쓰다 장 파한다. 먹을수록 덜덜 떨리는 음식은 추어탕. 우리가 사용하는 샴푸와 비누 머리 염색약 화장품 등에는 발암 물질이 포함되어 있다. 사람이 즐겨 먹는 피는 커피.",
"나쁜 일을 한 사람과 함께 있다가 덤터기로 죄 없이 벌을 받거나 누명을 쓰게 된다. 죄지은 사람 옆에 있다가 벼락 맞는다.  세상에서 가장 추운 바다는 썰렁해.",
"도원결의 뜻이 맞는 사람끼리 하나의 목적을 이루기 위해 행동을 같이 할 것을 약속한다. 장의사는 남이 울 때 웃는 사람.  세상에서 가장 추운 바다는 썰렁해.",
"만약 당신이 반지를 끼고 있다면 그 안쪽에는 유럽 인구보다 많은 세균이 꿈틀 거리고 있다. 싸움을 즐겨하는 나라는 칠레.",
"세계 최대의 동물인 대왕고래의 혀 무게는 성인 코끼리의 몸무게와 같다. 식인종이 밥 투정할때 하는 말은 에이 살맛 안나.",
"군계일학 많은 닭 중에서 한 마리의 학. 평범한 사람 가운데 뛰어난 사람을 일컫는 말. 마지막으로 돈 내고 나오는 사람은 마돈나.",
"사소한 것 같은 말투 하나에도 정감이 있으면 이왕이면 좋은 쪽으로 상대방은 선택하게 되어 있다. 말이 고마우면 비지 사러 갔다가 두부 사 온다.",
"눈앞에 보이는 작은 일에는 영리한 듯 하나 당장 나타나지 않는 큰 손해는 깨닫지 못함. 손톱 밑에 가시 드는 줄은 알아도 염통 안이 곪는 것은 모른다.",
"수면제. 자고 있는 환자를 간호사가 깨운다. 저기 일어나세요. 곤히 자고 있는데 왜 깨워요? 수면제 드실 시간 됐어요.",
"치과의사와 환자. 이빨이 아픈 환자가 치과를 찾았다. 이빨이 썩어서 뽑으러 왔어요. 얼마죠? 이만원입니다. 이만원이요? 순식간에 뽑는데 왜 그렇게 비싸죠? 그래요? 그럼 최대한 천천히 뽑도록 하죠.",
"예비부부. 신부의 부모님이 결혼을 반대하고 있다. 신부가 신랑에게 말한다. 우리 부모님이 결혼을 허락하지 않아요. 자신들이 눈을 감기 전에는 결혼을 허락할수 없데요. 그럼 부모님들이 주무실때 결혼합시다.",
"추위와 개집. 겨울에 개가 추위를 이기려고 좁은 공간에서 몸을 웅크리고 있었어요. 그러다가 집을 한 채 짓기로 결심했지요.",
"하지만 다시 여름이 돌아와 편안하게 누워 잘 수 있게 되자 마음이 게을러지며 굳이 잠잘 집을 만들 필요성을 느끼지 않았답니다.",
"수탉과 보석. 수탉이 자신의 가족과 암탉을 위해 먹이를 찾아 땅을 긁다가 보석을 하나 발견했으나 탄식하며 말했어요. 바나나는 숙성정도에 따라 색깔이 변한다.",
"내가 아니라 너의 본래 주인이 널 찾았더라면 좋아라하고 귀하게 다루었겠지만 내겐 전혀 쓸모가 없구나. 차라리 이 세상 모든 보석들보다 지금 당장은 보리쌀 한 알이 내겐 더 필요하거든.",
"비둘기와 까마귀. 새장에 갇힌 비둘기가 자신이 낳은 새끼들이 엄청 많다며 자랑을 하고 있었어요. 이 소리를 들은 까마귀가 말했지요.",
"원 세상에 이 친구야 말도 안 되는 자랑 좀 그만해. 이 새장 속에 갇힌 그 애들을 좀 봐. 네가 많이 낳으면 낳을수록 그로 인한 슬픔도 커진 거야.",
"해안길을 걸으며 대부도의 속살을 엿본다. 대부도에는 해안선을 따라 섬 한 바퀴를 둘러볼 수 있는 길이 74킬로미터의 대부해솔길이 있다.",
"대부도 방아머리 선착장을 시작으로 구봉도 대부남동 선감도 탄도항 등을 거치는 7개 코스로 길을 따라 걸으면서 갯벌길 염전길 석양길 바닷길 포도밭길 소나무길 등 다양한 풍경과 지역 관광 시설을 만난다.",
"당나귀와 베짱이. 베짱이들이 노래하는 것을 들은 당나귀는 그 아름다운 소리에 너무나 감동을 받았다. 그리고 똑같은 매력적인 소리를 갖고 싶었다.",
"그토록 아름다운 목소리를 내려면 어떤 종류의 음식을 먹고 사는지 물어보았다. 그들이 대답했다. 이슬이요. 당나귀는 오직 이슬만 먹고 살기로 마음 먹었다. 그리고 얼마 안돼서 당나귀는 굶어 죽었다.",
"거위들과 두루미들. 거위들과 두루미들이 강변에 있는 같은 풀밭에서 먹이를 먹고 있었어요. 그때 새잡이가 살금살금 다가오더니 그물을 휙 던졌어요.",
"먹이를 많이 못 먹어 몸이 가벼웠던 두루미들은 쉽게 날아올라 도망갈 수 있었지만 많이 먹어서 더 무거운 거위들은 비행이 느려서 죄다 사로잡히고 말았답니다.",
"양치기와 늑대. 한 양치기가 늑대 새끼를 주워 키웠어요. 잠시 후 그는 그 늑대에게 이웃집 목장에서 새끼 양을 훔쳐오는 법을 가르치기 시작했어요.",
"열심히 배우던 늑대가 한번은 양치기에게 말했어요. 일단 제게 도둑질을 가르치시면 당신 스스로도 망을 잘 보셔야 할 겁니다. 머지않아 제가 당신의 양들도 훔치게 될 테니까요.",
"모기와 황소. 모기가 황소의 뿔에 앉아 한참을 머물렀어요. 모기가 다시 날아오르기 직전 윙윙 거리는 목소리로 말했어요. 어이 내가 가 봐도 되겠니? 황소가 대꾸했어요. 오는 줄도 몰랐는데 뭘.",
"네가 그냥 갔어도 난 눈치 채지 못했을 거야. 남의 눈으로 볼 때보다 자신의 눈으로 볼 때 자기 자신을 더 중요시 생각하는 법이죠.",
"토끼의 도발. 토끼가 은행에 가서 지점장에게 묻는다. 당근 있어요? 지점장. 아니. 다음날 다시 갔다. 당근 있어요? 어제 없다고 했잖아. 그 다음날 다시 갔다. 당근 있어요? 없다고. 여긴 은행이야.",
"너 한번만 더 물어보면 그땐 가위로 귀를 잘라 버릴거야. 며칠후 다시 갔다. 혹시 가위 있어요? 가위 없는데. 그럼 당근 있어요?",
"앗 나의 실수. 고속버스 기사가 안내방송을 했다. 잠시후 이 차는 목적지인 대구에 도착합니다. 기사의 안내방송을 들은 승객들은 모두 자리에서 일어나 한바탕 소란이 일어났다.",
"광주로 갈 차가 왜 대구로 온 거요? 도대체 이게 어떻게 된 겁니까? 당황한 기사가 차에서 내려 차의 앞에 붙은 행선지 표지판을 보고 탄식했다. 아차 내가 차를 잘못 탔군.",
"고대의 전설에 따르면 모든 사람들은 태어나면서부터 목에 두 개의 주머니를 앞뒤로 차고 나온다고 합니다. 앞에 있는 주머니엔 다른 사람의 잘못이 들어 있고 뒤에 있는 주머니엔 자기 자신의 결점들이 가득 차있다고 하네요.",
"그리하여 세상 사람들은 상대방의 잘못을 찾아내는 데에는 기가 막히게 빠르지만 제 자신의 결점들은 알지 못하고 넘어간다고 하네요.",
"살인자와 나일 강. 살인을 저지른 한 남성이 희생자의 가족으로부터 추격을 받고 있었어요. 그가 나일 강에 도착해보니 강둑에 사자가 나타나 어흥하고 위협을 했어요.",
"그가 나무로 올라가 피했더니 이번엔 나뭇가지에 있던 독사가 슈슈하며 크게 위협하는 바람에 그는 강으로 뛰어내렸어요. 그러자 강에 있던 악어가 그를 잡아먹어버렸어요.",
"역시나 살인자에겐 하늘이든 땅이든 안식처는 없는 법이랍니다. 실질적인 도움을 주지 않고 하는 조언은 아무짝에도 쓸모없는 거랍니다.",
"왕자와 공주. 어느나라 공주가 마법에 걸렸는데 그 공주를 깨우기 위해 여행을 하던 한 왕자가 드디어 잠든 공주를 찾아냈다. 오 완전 겁나게 아름다운 공주네.",
"공주님 공주님 어서 눈을 뜨시오. 그러고는 공주의 이마에 왕자는 뽀뽀를 했다. 잠시 후에 공주는 깨어났다. 그 공주는 왕자의 얼굴을 보자마자 애기를 했다. 여봐라 어서 빨리 수면제를 가지고 오너라.",
"목욕하던 소년. 강에서 목욕하던 소년이 그만 물에 빠져 익사하기 직전이었어요. 소년의 다급한 외침에 지나가던 여행자가 도착했는데 아 글쎄 이 사람은 도와주는 손을 내밀지 않았다.",
"손을 내미는 대신 왜 이런 위험한 곳에서 목욕을 했냐며 잔소리를 하는 게 아니겠어요. 화가 난 소년은 외쳐댔어요. 저부터 일단 구한 다음에 잔소리를 하시라고요.",
"할머니의 나들이. 전라도 군산에서 할머니 한 분이 독립기념관에 나들이를 갔다. 여기저기 한참을 돌아다니시느라 몸이 피곤한 할머니가 의자에 앉아 쉬고 있는데 경비원이 다가와서는 말했다.",
"할머니 이 의자는 김구선생님이 앉던 자리인데 앉으시면 안 됩니다. 그래도 할머니가 태연히 앉아있어서 경비원이 다시 한 번 비켜달라고 부탁을 드렸다. 이때 화가 난 할머니가 말했다. 야 이 양반아 주인 오면 비켜 주면 되잖아.",
"참나무와 나무꾼들. 나무꾼들이 키 큰 목재용 참나무를 베어 토막을 낸 다음 그 나무줄기에서 나뭇가지들을 쳐내 도끼자루로 만들고 있었어요. 이런 비참한 꼴을 당하던 참나무가 한숨을 푸욱 내쉬며 말했어요.",
"도끼에 내 밑동이 찍힌 건 아쉽지 않지만 내 자신의 나뭇가지로 또 도끼자루들을 만든다니 서글플 뿐이다. 스스로 자초한 불행이 가장 뼈아픈 법이죠.",
"메뚜기 잡으려다 일낸 소년. 메뚜기를 잡으러 나선 소년이 있었어요. 그래서 메뚜기들을 잔뜩 잡았답니다. 그러다 전갈 한 마리를 발견했는데 소년은 그만 그 전갈도 메뚜기라 착각하고서 손을 내뻗어 쥐고 말았어요.",
"전갈을 말이죠. 전갈이 독침을 드러내며 말했어요. 나를 건들지만 않았어도 목숨을 잃지도 그리고 그 많은 메뚜기들을 잃지도 않았을 텐데.",
"곰과 여우. 곰이 자신은 박애정신이 많다며 엄청 뽐내고 있었습니다. 그러니까 곰의 말로는 자신이 사람으로 치면 남들을 잘 배려해주고 사랑하는 그런 동물이라는 거지요.",
"난 죽은 것엔 손 하나 까딱하지 않거든. 그러자 보다 못한 여우가 피씩 웃으며 곰에게 말했습니다. 산 걸 먹지 말고 죽은 것만 먹는 게 더 좋은 거 아냐?",
"병든 수사슴. 병든 수사슴이 풀밭의 조용한 곳에 드러누워 안정을 취하고 있었습니다. 그러자 그의 친구들이 떼거지로 몰려와 안부를 물었죠. 나쁜 친구는 없느니만 못해요.",
"그런데 그 친구들은 하나같이 병든 수사슴이 먹으려고 둔 음식을 야금야금 먹어치우고 갔습니다. 그렇게 하나 둘씩 수사슴의 음식을 먹어치우고 가다 보니 결국 병든 수사슴은 먹이를 더 못 구해 죽고 말았답니다.",
"나그네와 개. 여행을 떠나려는 어떤 나그네가 그의 개가 문 앞에서 다리를 뻗으며 서 있는 것을 보았다. 그는 개에게 날카롭게 물었다. 왜 거기서 하품하며 서 있지?",
"너만 빼고 모두 준비되었다. 그러니 어서 나를 따라 가자. 개는 꼬리를 흔들면서 대답했다. 오 주인님 저는 벌써 준비되었습니다. 저는 당신을 기다리고 있었습니다. 늑장 부리는 자가 부지런한 사람을 느리다고 욕한다.",
"농부와 뱀. 어느 겨울에 한 농부가 추위로 꽁꽁 얼은 뱀 한 마리를 발견했다. 그는 뱀이 불쌍했다. 그래서 그것을 들고는 자신의 가슴에 품었다.",
"뱀은 온기를 되찾고 살아났다. 그리고 자신의 본능을 되찾아서 자신의 은인을 물었다. 그에게 치명적인 상처를 주었다. 농부가 마지막 숨을 거두며 말했다. 내가 망나니를 불쌍히 여겼으니 당연한 대가로다.",
"주례비. 예비신랑이 잘 아는 교수님에게 주례를 부탁하러 갔다. 교수님 저 결혼하는데 주례 좀 부탁드릴게요. 주례비도 넉넉히 드리겠습니다. 그러자 교수가 말했다.",
"우리 사이에 무슨 주례비야. 정 그렇다면 신부가 예쁜 만큼 줘. 말 끝나기 무섭게 신랑은 만원을 주례비로 주고 갔다. 결혼식날 교수는 주례를 하기 위해서 결혼식장에 갔다.",
"신부의 얼굴을 보고 나서 신랑에게 말했다. 얼마 거슬러 주면 되냐? 지극한 친절함도 배은망덕한 자를 붙들지는 못한다.",
"바다와 호수 사이로 불어오는 바닷바람을 즐기는 시화방조제길. 오이도와 대부도를 잇는 시화방조제는 안산을 대표하는 드라이브 코스다.",
"길이가 11킬로미터나 되는 방조제길을 달리는 동안 오른쪽에는 바다 왼쪽에는 시화호가 시원하게 펼쳐진다. 시화방조제에는 세계 최대 조력발전소인 시화호조력발전소가 있다.",
"방조제 초입에 위치한 시화나래 조력문화관은 시화호의 역사와 에너지에 대해 배울 수 있는 곳이다. 그 옆에 있는 달전망대에 오르면 끝없이 이어진 시화방조제와 시화호가 한눈에 들어온다.",
"원숭이 자녀들과 엄마 원숭이. 흔히 전해오는 말이 있습니다. 엄마 원숭이가 한 번에 두 아이를 낳게 되면 엄마 원숭이는 한 애만 편애한다고 합니다.",
"그 애한테만 애정을 보이고 돌본다고 합니다. 그에 반해 다른 애는 싫어하고 무시한다네요. 하지만 엄마로부터 애정과 관심을 듬뿍 받고 자란 원숭이는 숨이 막혀 성장이 더디다.",
"엄마로부터 애정과 관심을 듬뿍 받고 자란 원숭이는 숨이 막혀 성장이 더디지만 방치되고 아무렇게나 자란 원숭이는 훨씬 잘 자란다고 합니다. 항상 의도대로만 되는 건 아닌 거죠.",
"아저씨 누구세요? 매일 꼴찌만 하는 아이가 있었다. 아들이 매일 꼴찌만 하자 더 이상 참지 못한 아버지가 한가지 제안을 하였다. 아들아 네가 만약 꼴찌를 면하면 소원을 하나 들어줄께. 아들이 기뻐하자 아버지가 한마디 덧붙였다.",
"그러나 또 꼴찌를 하면 너는 더 이상 내 아들이 아니다. 다음날 아들이 시험을 보고 돌아왔다. 아버지는 아들에게 물었다. 얘 어떻게 됐니? 아들이 대답했다. 아저씨 누구세요?",
"모세의 기적이 일어나는 섬 제부도. 모세의 기적이 일어나야 들어갈 수 있는 섬. 넓게 펼쳐진 갯벌 가운데 난 바닷길을 달리는 것은 색다른 즐거움이다.",
"섬을 상징하는 빨간 등대 중심으로 해안을 따라 걸을 수 있다. 제비꼬리길이라는 트레킹 코스로 해안 트레킹과 짧은 등산을 할 수 있다.",
"전체를 모두 도는 데 소요되는 시간은 약 1시간. 지난 2016년부터 문화 예술의 섬 프로젝트를 진행하면서 섬 전체 분위기가 화사하게 바뀌었다.",
"낙타와 두려움. 낙타를 처음 본 사람이 그 엄청난 몸집에 기절초풍한 나머지 달아나고 말았어요. 잠시 후 암만 봐도 그 동물의 성격이 온순하고 친절한 거 같아 그가 용기를 내곤 다가가보았죠.",
"곧이어 이제 보니 그 동물이 좀 우둔한 거 같다고 낌새를 챈 그는 이제 대담무쌍하게도 그 낙타의 입에 고삐를 물리는 것을 너무도 당연시하곤 워이 워이하며 몰고 갔답니다. 처음이 어렵지 익숙해지면 두려움도 사라지는 법이죠.",
"개와 그림자. 개 한 마리가 입에 고깃점을 물고서 개울 위 다리를 건너다 물 위에 비친 자신의 그림자를 보고서 그게 자기 것보다 두 배가 큰 고깃점을 문 다른 개인 걸로 착각을 하고 말았어요.",
"그 즉시 개는 물고 있던 고깃점을 떨어뜨리곤 사납게 물에 비친 다른 개에게로 달려들고 말았어요. 그 개에게서 자기 거보다 더 큰 고깃점을 빼앗기 위해서였죠. 그리하여 개는 둘 다를 잃고 말았답니다.",
"그가 물로 뛰어들어 왈칵 붙잡은 건 그림자였고 그리고 자신이 원래 물고 있던 그 고깃점은 개울에 그냥 유유히 떠내려가고 말았으니까요.",
"황소와 굴대. 한 떼의 황소들이 무거운 짐마차를 끌고서 시골길을 따라 길을 가고 있었어요. 그런데 바퀴들이 삐걱삐걱 지독한 신음소리를 내는 거예요. 보다 못한 황소들이 고개를 돌려 수레바퀴들에게 이렇게 말했어요.",
"어이 거기 왜 그리 시끄러워? 일은 우리가 다 하는데 비명을 질러도 너희가 아니라 우리가 질러야 되는 거 아냐. 고생하는 사람 따로 있고 불평하는 사람 따로 있는 법이죠.",
"목마른 비둘기. 엄청 목이 마르던 비둘기가 간판 위에 물이 담긴 잔이 그려진 것을 보았어요. 그게 그림일 거란 생각은 전혀 못한 비둘기는 엄청 푸드덕거리며 그곳으로 날아가서 그만 간판에 정통으로 쿵하고 부딪히고 말았어요.",
"바람에 몸에 엄청난 충격을 받은 비둘기의 두 날개가 부러져서 비둘기는 땅에 떨어지고 말았답니다. 그러자 그 모습을 보고 있던 구경꾼들 중 한 명이 잽싸게 그 비둘기를 낚아채가고 말았답니다.",
"천문학자. 천문학자가 밤이면 산책을 하며 별들을 관찰하곤 했습니다. 그러던 하루는 그가 밤에 교외지역을 거닐며 하늘에 온통 신경을 집중하고 있다가 그만 실수로 깊은 우물 속에 빠지고 말았습니다.",
"멍들고 쑤시고 아프고 슬퍼서 큰 소리로 도움을 요청했지요. 이웃이 달려와 도와주고 어찌된 영문인지를 듣더니 이렇게 말했습니다. 나원 참 바로 앞 땅도 못 보시면서 하늘은 그리도 살피고 싶으셨소?",
"소년과 쐐기풀. 한 소년이 쐐기풀에 쏘였어요. 소년은 집으로 달려가 엄마에게 말했어요. 전 그냥 닿기만 했는데 그게 절 아주 세게 쏘았어요.",
"그게 바로 네가 쏘인 이유란다라며 엄마가 말했어요. 다음번에 쐐기풀에 손이 닿을 거 같으면 대담하게 확 움켜쥐려무나. 그럼 그게 비단만큼 부드러워질 게다. 적어도 널 다치게 하진 못할 게다.",
"농부와 아들들. 평생 열심히 농사를 지어 부자가 된 농부가 있었어요. 죽음의 문턱에 선 농부는 아들들이 농장에 자신만큼 신경을 써주기를 바랬어요. 그래서 그들을 불러서 말했지요.",
"얘들아 내 포도밭들 중 하나에 큰 보물이 있단다. 아버지가 돌아가신 후 아들들은 삽과 곡괭이들을 가지고 와 온 땅을 다 파보았어요. 하지만 보물을 찾을 수 없었답니다.",
"다만 그들의 값진 노동 덕분에 포도나무들에선 전에 없는 포도송이들이 풍부하게 생산되었지요. 우연히 좋은 일이 생기더라도 신중해야 합니다.",
"황금알을 낳는 암탉. 어느 시골 농부와 아내에겐 매일 황금알을 낳아주는 암탉이 한 마리 있었어요. 그들은 암탉의 배에 황금이 가득 들어 있을거라고 생각했어요.",
"그래서 황금을 한꺼번에 얻으려고 그들은 암탉의 배를 갈라보았죠. 하지만 암탉의 배는 여타 다른 암탉들의 배와 별반 다르지 않았어요.",
"그리하여 단번에 부자가 되려던 희망에 부풀어 있던 어리석은 부부는 결국 하루에 한 알씩 얻던 황금알까지도 놓쳐버리고 말았답니다.",
"과부와 어린 하녀들. 청소를 유난스레 좋아하는 한 과부가 있었습니다. 그녀에겐 시중드는 두 어린 하녀가 있었습니다. 그런데 과부는 새벽에 닭이 울기만 하면 아침 일찍부터 하녀들을 깨우는 버릇이 있었습니다.",
"과도한 노동시간에 격분한 하녀들이 이 모든 원인인 그 수탉을 죽여 버리기로 결심했습니다. 그런데 수탉이 죽자마자 하녀들에겐 더 큰 난처한 일이 생겼습니다.",
"왜냐면 더 이상 수탉을 통해 시간을 가늠할 수 없게 된 여주인이 한밤중에도 시도 때도 없이 일하라며 하녀들을 깨웠기 때문이지요.",
"엄마의 꾸중. 아파트 엘리베이터안에 한 남자가 타고 있었다. 그런데 밖에서 한 아이가 열림 버튼을 누르고 엄마를 향해 소리쳤다. 엄마 빨리와. 엘리베이터 닫힌단 말이야.",
"3분쯤 시간이 흐른뒤 아이의 엄마가 헐레벌떡 뛰어 들어왔다. 그리고는 아이에게 꾸중을 하였다. 그렇게 하지 말랬지. 남자는 아이의 행동이 잘못되었음을 꾸중하는 것으로 생각했다.",
"낙조와 풍력발전기의 환상적 컬래버레이션 탄도 바닷길. 탄도는 하루에 두 번 바닷길이 열린다. 바닷길이 열리면 방조제를 따라 1킬로미터 떨어진 누에섬으로 들어갈 수 있다.",
"섬으로 들어가는 길에 설치한 3개의 풍력발전기는 우리나라에서 처음으로 갯벌 위에 세운 것이다. 바닷물이 빠져 드넓게 펼쳐진 갯벌 위로 떨어지는 석양은 아름다운 풍광을 연출한다.",
"풍력발전기는 말로 표현할 수 없을 만큼 아름다운 풍광을 연출한다. 누에섬에는 등대 전망대가 있는데 전망대에 오르면 인근 섬과 서해 바다가 아득하게 내려다 보인다.",
"당나귀와 개구리들. 당나귀가 나뭇짐을 등에 지고 연못을 건너고 있었어요. 그러다 물에 발을 헛디뎌 넘어지는 바람에 물에 풍덩하고 빠져 일어서질 못했답니다.",
"그래서 당나귀가 애걸복걸 살려달라 신음하고 있었죠. 이 소리를 듣고서 그곳에 사는 개구리들이 말했어요. 고작 그 정도 물에 빠진 걸로 그렇게 떠들어대면 맨날 여기 사는 우린 어쩌라고?",
"까마귀와 물주전자. 갈증으로 목이 타들어가던 까마귀가 물주전자를 발견했습니다. 그래서 기쁜 마음에 푸드덕하고 주전자쪽으로 날아가보았죠.",
"그런데 슬프게도 물주전자 안에 든 물이 너무 작아 그의 부리가 닿질 않는 거예요. 그가 별 짓을 다 해보았지만 모두 헛수고였습니다. 까마귀가 돌맹이를 하나씩 주워와 그 물주전자 안에 떨어뜨렸습니다.",
"차차 물이 위로 올라오면서 부리로도 물을 마실 수 있게 되어 타는 갈증을 해결할 수 있었답니다. 필요는 발명의 어머니죠. 바나나는 숙성정도에 따라 색깔이 변한다.",
"숯 굽는 사람과 가죽장사. 어떤 숯 굽는 사람이 자기 자신의 집에서 사업을 시작하였다. 어느 날 그는 친구인 가죽장사를 만났다. 그리고 그에게 자기 집에서 함께 살자고 간곡히 부탁했다.",
"그리고 그들이 아주 훌륭한 이웃이 될 수 있다고 했다. 또한 그들의 살림 비용이 줄어들 것이라고 말했다. 가죽장사가 대답했다. 나로서는 그런 구상이 불가능하다고 생각한다.",
"왜냐하면 내가 하얗게 만들자마자 너는 곧 그 숯으로 시커멓게 만들것이 아닌가. 끼리끼리 어울려야 한다. 필요는 발명의 어머니죠.",
"갈매기가 오지 않는 까닭은. 동쪽 바닷가에 갈매기를 몹시 사랑하는 소년이 있었다. 소년은 매일 아침 바닷가에서 수백 마리의 갈매기 떼와 어울려 사이좋게 놀았다.",
"어느 날 아버지가 이것을 알고 아들에게 말했다. 얘야 네가 갈매기들과 친하다고 하니 내일 아침에 갈매기 한 마리만 잡아다 주렴. 심심할 때 나의 노리개로 삼고 싶구나.",
"아버지의 간곡한 부탁에 소년은 갈매기를 잡으려는 마음을 가지고 바닷가로 나갔다. 그런데 그날 따라 갈매기들은 공중에서 너울너울 춤을 출 뿐 한 마리도 소년의 곁에 내려앉지 않았다.",
"선생님과 부반장. 수업시간에 선생님께서 칠판에 글을 쓰고 있는데 껌 씹는 소리가 요란하게 들렸다. 뒤돌아 보니 입을 열심히 움직이는 학생을 발견하였다.",
"야 너 입안에 뭐야? 큰소리로 말하는 선생님 소리에 이 학생은 깜짝 놀라 말을 못하고 선생님만 쳐다보고 있었다. 화가 더 난 선생님은 더 크게 소리쳤다. 너 입안에 뭐냐니까?",
"한참을 멍 하니 있던 학생이 말했다. 저어 이반에 부반장인데요. 바나나는 숙성정도에 따라 색깔이 변하는데 색깔에 따라 각각의 효과가 다르다. 세상에서 가장 추운 바다는 썰렁해.",
"이국적 풍경의 대규모 마리나 시설 전곡항. 항구 옆에 방파제가 있어 밀물과 썰물의 영향을 받지 않아 배가 드나들기 수월한 전곡항에는 요트와 보트가 접안할 수 있는 대규모 마리나 시설을 갖춰 이국적 풍광을 자아낸다.",
"전국 최초의 레저 항구라는 타이틀에 걸맞게 경기국제보트쇼 세계요트대회 화성뱃놀이축제 전국해양스포츠제전 등 대규모 수상 레포츠 행사가 열린다.",
"그뿐 아니라 요트 승선과 낚시 등 다양한 해양 레저 체험이 가능하다. 갯고둥 바지락 캐기 밀물과 썰물의 차로 고기를 잡기 망둥이 낚시 등 어촌 체험 프로그램을 즐길 수 있다.",
"위와 신체의 다른 부위들. 신체의 다른 부위들이 위에게 반란을 일으켰어요. 그들이 말했죠. 왜 우리가 네 시중을 들어야하는데 네가 하루 종일 먹고 놀며 각종 사치와 방종을 부리는 걸 왜 우리가 도와야하느냐?",
"그래서 신체의 다른 부위들은 단합을 하고서 위를 보좌하는 걸 거부해버렸어요. 바나나는 숙성정도에 따라 색깔이 변하는데 색깔에 따라 각각의 효과가 다르다.",
"그러자 곧 온 몸이 급속도로 쇠약해져갔지요. 손이며 발이며 입이며 눈이며 죄다 쇠약해졌어요. 그제야 그들이 자신들의 어리석음을 후회했지만 아쉽게도 때는 이미 늦었답니다.",
"늑대와 두루미. 목에 가시가 걸린 늑대가 두루미를 찾아가 말했어요. 보답은 두둑히 할테니 네 머리를 내 입에 넣어서 가시 좀 빼주렴. 가시를 뽑아낸 두루미가 약속한 보답을 요구했어요.",
"그러자 늑대가 자신의 무시무시한 이빨을 드러내며 이를 갈더니 큰소리로 말했어요. 흥 늑대의 아가리와 턱에 네 머리를 집어넣고도 무사히 다시 뺄 수 있었다면 이미 보상은 두둑히 받은 거 아냐.",
"아셨죠 사악한 사람을 도울 땐 절대 보답을 기대해선 안 돼요. 차라리 그 과정에서 해코지라도 당하지 않은 걸 천만다행으로 생각해야한답니다.",
"까마귀와 백조. 백조를 본 까마귀가 자기도 그처럼 아름다운 깃털을 가지고 싶어졌어요. 백조의 찬란한 흰색은 백조가 물에서 헤엄치며 목욕을 즐겨하기 때문이라 생각했어요.",
"까마귀는 자신이 음식을 주워먹고 살던 정든 곳을 떠나 호수와 못에 정착했어요. 그래서 항시 깃털을 깨끗이 씻었죠. 그런데 아무리 씻어도 자신의 검정색은 변하지 않는 거예요.",
"게다가 거긴 음식도 부족해 까마귀는 결국 죽고 말았답니다. 버릇이 바뀐다고 고유한 본성까지 변할수는 없는거랍니다.",
"사자와 산토끼. 산토끼가 깊이 자고 있는데 사자가 들이 닥쳤어요. 사자가 막 산토끼를 물려는데 때마침 젊고 튼실한 수사슴이 지나가지 뭐에요. 그래서 사자는 산토끼를 놓아두고 그 수사슴을 쫓아갔죠.",
"그 소란에 정신을 차린 산토끼가 죽을 힘을 다해 도망쳤어요. 사자는 아무리 수사슴을 쫓아가도 소용이 없자 대신 아까 그 산토끼라도 잡아먹으려고 돌아왔어요. 하지만 산토끼는 이미 달아나버리고 없었죠.",
"사자가 말했어요. 허참 먹이를 손에 쥐고서도 또 다른 먹이를 얻으려다 둘 다 놓치고 말았네. 바나나는 숙성정도에 따라 색깔이 변하는데 색깔에 따라 각각의 효과가 다르다.",
"불침번. 모 군부대에서 당직사관이 순찰 하고 있었는데 주변을 아무리 둘러봐도 불침번 근무자가 보이지 않는 것이다. 당직사관은 고함을 치며 병사를 불렀다. 불침번 어디 있어.",
"그러자 한 내무반에서 모기소리 처럼 자그마한 소리가 들렸다. 여기 있습니다. 가까이 다가가 보니 불침번은 아 글쎄 이불을 덮고 누워 있는 것이 아닌가. 당직사관은 화가 나서 소리를 쳤다.",
"아니 불침번이 왜 이불 속에 들어가 있느냐? 그러자 근무자가 대답했다. 저 지금 잠복근무를 하고 있습니다. 바나나는 색깔에 따라 각각의 효과가 다르다.",
"파리들과 꿀단지. 꿀단지를 발견한 수많은 파리들이 가정주부의 방을 잔뜩 뒤덮었어요. 그들은 자신들의 팔을 꿀단지에 담가 탐욕스럽게 맛을 보았죠.",
"하지만 발을 꿀에 담그면 담글수록 자연스레 그들의 날개 또한 꿀에 젖어 날 수 없게 되었지요. 결국 그들은 꿀의 끈적거림에 빠져나오지 못하고 익사하게 되었답니다.",
"마지막 숨을 몰아쉬며 파리들이 탄식하며 말했어요. 오 우리처럼 이렇게 미련한 것이 또 있을까. 꿀 조금 맛보려다 스스로를 파멸로 이끌고 말았으니 말이야. 즐거움에는 고통이 따르는 법이랍니다.",
"엄마게와 아들게. 엄마 게가 아들 게에게 말했어요. 넌 대체 누굴 닮아 그렇게 한쪽으로만 걷니? 똑바로 걷는 연습을 해보렴. 어린 게가 대답했어요. 그럼 엄마가 시범을 보여주면 내가 따라해 볼게.",
"엄마 게가 애를 써보았지만 허사였어요. 엄마게는 그제서야 깨달았어요. 아이를 타이를 때는 자신부터 돌아봐야한다는 걸 말이죠. 자식 교육을 위해서는 훈계보다는 솔선수범이죠.",
"헤라클레스와 마부. 어떤 마부가 시골길을 따라서 마차를 몰고 있었다. 그때 바퀴들이 내려 앉으면서 도랑에 쳐 박혔다. 시골 마부는 바보처럼 넋이 나가 마차를 바라보며 서 있었다.",
"그리고 아무 일도 하지 않고서 헤라클레스에게 도와 달라고 소리쳤다. 헤라클레스가 그에게 나타나서 이렇게 말했다. 이 사람아 당신의 어깨를 바퀴에 대라. 당신 소들의 엉덩이를 쳐라.",
"그리고 스스로 최선을 다해라. 그렇게 할 때까지는 결코 나에게 도움을 달라고 기도하지 말라. 당신 자신이 최선을 다하지 않는 한 당신은 헛되이 기도하게 될 것이다.",
"참나무와 갈대. 엄청 큰 참나무 한 그루가 강풍에 그만 뿌리 채 뽑혀 시냇물 위에 꼴까닥 드러눕고 말았어요. 갈대들 사이로 쓰러진 참나무가 갈대들에게 말했어요.",
"너희들은 그렇게 여리고 가냘프면서도 이 강풍에 끄떡없구나. 갈대들이 대답했어요. 네가 그 강풍에 맞서려고만 했으니까 그렇지.",
"그래서 강풍도 기를 쓰고 널 쓰러뜨린 거잖아. 반면 우린 미풍에도 고개를 숙일 줄 안단다. 그러니 우리 갈대들에겐 부러지는 일은 없어. 바람도 빗겨가거든. 숙일 줄 아는 자에게 복이 있나니.",
"사랑에 빠진 사자. 사자는 나무꾼의 딸과 결혼을 하고 싶었어요. 하지만 나무꾼은 전혀 그럴 마음이 없었어요. 그렇다고 사자의 청을 거절하기도 무서워서 빠져나갈 궁리를 생각했어요.",
"그래서 사자에게 말했어요. 딸아이의 상대로 자네를 맞이하려면 한 가지 조건이 있네. 자네 이빨을 제거하고 발톱들도 다 자르고 오게나. 딸애가 그걸 끔찍이도 두려워하거든.",
"사자는 흔쾌히 그 제안을 받아들였지요. 이빨도 없고 발톱도 없는 사자가 다시 돌아와 결혼을 신청했어요. 사자가 더 이상 무섭지 않게되자 나무꾼이 몽둥이로 사자를 두들겨 패 숲으로 쫓아버렸답니다.",
"아버지와 아들들. 어떤 아버지에게 끊임없이 다투는 아들들이 있었다. 그는 분열이 얼마나 악한 것인지 몸으로 느끼는 경험을 겪게 해 주기로 마음먹었다.",
"그는 어느 날 아들들에게 막대기 한 다발을 가져오라고 했다. 그들이 가져오자 아버지는 그 다발을 그들 각자의 손에 차례대로 올려 놓고 부러뜨리라고 말했다.",
"그들은 젖 먹던 힘까지 모아서 그것을 부러뜨리려고 했으나 불가능하였다. 그는 이제 다발을 풀고서 막대기들을 하나씩 들고 그들의 손에 놓아 주었다. 그러자 이번에는 막대기가 쉽게 부러졌다.",
"그러자 아버지는 그들에게 이렇게 말했다. 만일 너희가 한 마음이 되어 서로를 도우려고 뭉치면 이 다발처럼 단단할것이지만 서로 갈라진다면 이 막대기들처럼 쉽게 부러질 것이니라.",
"여우와 까마귀. 까마귀 한 마리가 고기조각 하나를 훔쳐서 입에 꼭 물고 나뭇가지에 앉아 있었답니다. 이걸 본 여우는 그 고기조각을 자신이 대신 먹고 싶어 안달이 났어요.",
"그래서 잔꾀를 하나 생각해냈죠. 여우는 큰소리로 말했어요. 참 예쁜 까마귀이구나 정말 몸매며 피부며 아름다움 그 자체인 걸. 좋은 목소리만 가졌다면 정말 새들의 여왕이 되시고도 남겠어.",
"이건 모두 여우가 까마귀를 속이려고 하는 말들이었어요. 하지만 한껏 우쭐해진 까마귀는 목소리 자랑도 하고 싶어 큰 소리로 까악까악 울어댔지요. 그 바람에 물고 있던 고기를 떨어뜨리고 말았어요.",
"여우는 잽싸게 그걸 낚아채 가며 까마귀보고 말했어요. 존경하는 까마귀씨 목소리 좋은 건 알겠는데 머리는 둔하시군요.  세상에서 가장 추운 바다는 썰렁해.",
"제우스와 원숭이. 제우스가 숲에 사는 모든 동물들에게 다음과 같이 알렸어요. 가장 잘생긴 아기를 낳은 동물에게 후하게 상을 내리리라. 모여든 동물들 중엔 원숭이 엄마도 있었어요.",
"그녀가 자신의 아기 원숭이를 엄마의 온정을 담아 후보로 내밀었어요. 그건 코가 펑퍼짐하고 머리카락은 하나도 없고 털도 추한 그저 그런 아기 원숭이였어요. 그 바람에 모두가 웃었지요.",
"하지만 그녀는 결연히 말했답니다. 제우스께서 제 아들에게 상을 주실지 말지 저는 모릅니다. 하지만 이거 하나만은 저도 알고 있어요. 이 애가 엄마인 제 눈엔 이 세상에서 가장 예쁘고 잘생겼고 우아하다는 것을요.",
"사자와 생쥐. 생쥐 한 마리가 얼굴 위를 밟고 지나가는 바람에 사자가 자다 깼어요. 벌컥 화가 난 사자가 생쥐를 잡아 막 죽이려던 찰나에 생쥐가 간절히 자비를 부탁하며 말했어요.",
"살려만 주신다면 이 은혜를 꼭 갚을 게요. 말같지도 않다고 생각했지만 사자는 생쥐를 놓아주었답니다. 이 일이 있고 머지않아 사냥꾼들이 놓은 덫에 그 사자가 걸리고 말았어요.",
"사냥꾼들은 단단한 끈들로 사자를 단단히 묶어놓았답니다. 사자가 포호하자 그 소리를 들은 생쥐가 뛰어 왔어요. 그리고는 생쥐는 자신의 이빨로 끈을 갉아먹기 시작해 사자를 다시 풀어주었어요.",
"생쥐가 외쳤죠. 제가 도와드린다고 말씀드렸을 때 절 비웃으셨죠. 제게 도움 받을 일은 없다고 생각하셨겠지요. 이젠 생쥐도 사자님을 구할 수 있다는 걸 아셨죠.",
"이발사. 천주교 신부가 이발소에서 머리를 깎고 나서 얼마를 내야 할지 물었다. 돈을 안 내셔도 됩니다. 주님을 위해 봉사했다고 생각하죠.",
"이튿날 아침 이발사가 자기 이발소에 와보니 신부의 감사쪽지와 기도서 한 묶음이 현관 계단에 놓여 있었다. 며칠 후 경찰관이 이발을 하고 나서 물어 보자 이발사가 대답했다.",
"돈을 안 내셔도 됩니다. 지역 사회를 위해 봉사했다고 생각하죠. 다음날 아침 이발사는 경찰관의 감사쪽지와 함께 많은 도너츠를 받았다.",
"그리고 나서 얼마 후 국회의원이 머리를 깎고 얼마인지 물어 보자 대답했다. 돈을 안 내셔도 됩니다. 나라를 위해 봉사했다고 생각하죠.",
"이튿날 아침 그가 이발소에 나가 보니 이발소 앞에 십여 명의 국회의원들이 그를 기다리고 있었다. 바나나는 숙성정도에 따라 색깔이 변하는데 색깔에 따라 각각의 효과가 다르다.",
"파타고니아는 아르헨티나와 칠레 두 나라 사이에 걸쳐 있는 자연 명소이다. 남극과 가장 가까운 땅으로도 유명하다. 이곳은 지구의 끝이란 별명답게 인간의 손때가 묻지 않은 청정 자연을 간직한 곳이다.",
"트레커들의 로망으로 꼽히는 파타고니아는 연중 기온이 낮고 과거 지각변동으로 생긴 빙하와 피오르 지형이 장엄함을 선사한다.",
"파타고니아에는 세계에서 가장 초현실적인 곳으로 꼽히는 명소가 있는데 바로 카레라 호수의 대리석 동굴이다. 바나나는 숙성정도에 따라 색깔이 변한다.",
"겉에서 보면 그저 조그만 동굴이지만 보트를 타고 안으로 들어가면 대리석에 호수가 반사되어 그야말로 지구 밖 우주적인 풍광이 펼쳐진다.",
"동굴은 6세기에 걸쳐 만들어졌으며 바람과 빛에 따라 시시각각 풍경이 변한다. 동굴 탐험의 유일한 수단은 보트로 직접 노를 저으며 대리석 호수를 탐험하다 보면 자연과 하나 되는 신비로운 경험을 만끽할 수 있다.",
"대리석 동굴은 일년 내내 보트 탐험이 가능한데 호수의 수위가 낮고 바람이 잔잔한 4월부터 6월까지가 탐험 최적기다. 보트 투어이니 사전에 멀미약을 챙기는 것이 좋다.",
"위스키는 아일랜드를 대표하는 술이다. 술을 즐기지 않더라도 독일에 가면 맥주를 마셔야 하듯 아일랜드에 가면 한번쯤은 위스키를 마셔야 한다.",
"아일랜드의 위스키 역사는 오랜 시간을 거슬러 올라간다. 1171년 잉글랜드의 왕 헨리 2세가 아일랜드를 침략했을 때 이미 위스키의 원형인 보리로 만든 증류주가 있을 정도였다.",
"아일랜드 수도인 더블린에는 위스키를 즐길 수 있는 명소들이 특히 많다. 그중에서도 가장 대표적인 아이리시 위스키 뮤지엄은 아이리시 위스키의 역사뿐 아니라 다양한 위스키를 시음할 수 있는 매력적인 장소다.",
"아일랜드에서 생산되는 위스키는 보통 2회가 아닌 3회에 걸쳐 증류해 향과 풍미가 깊은 것이 특징이다. 또한 위스키를 만드는 과정을 친절히 알려주는 가이드 투어도 제공한다.",
"이 밖에 더블린에는 위스키 브랜드의 증류소도 여러 곳 있어 위스키 만드는 모든 과정을 직접 눈으로 확인하고 체험할 수 있다. 아이리시 위스키 뮤지엄은 위스키 시음 개수에 따라 입장료가 달라진다.",
"아시안 푸드가 세계적으로 열풍을 일으키면서 방콕은 음식의 성지로 떠오르고 있다. 이러한 트렌드로 팟타이 똠양꿍 등 태국 음식을 현지에서 직접 배우는 쿠킹 클래스도 덩달아 인기를 얻고 있다.",
"방콕에는 쿠킹 클래스를 체험할 수 있는 곳들이 현지 시장을 중심으로 골목마다 있다. 각자 만들 음식의 재료들을 시장에서 하나하나 고르고 국내에서는 낯선 향신료들의 설명도 들을 수 있다.",
"선생님의 비밀 레시피를 전수받으며 요리를 만들고, 참여한 여행객들과 함께 만찬을 즐기는 것도 클래스만의 묘미다. 쿠킹 클래스를 전문으로 하는 곳 외에도 방콕 현지 맛집에서 쿠킹 클래스를 진행하는 경우도 많으니 맛집 정보도 미리 참고하자.",
"솜퐁 타이 쿠킹 스쿨은 전문 셰프가 진행하는 곳으로 방콕에서 가장 유명한 쿠킹 클래스이자 여행객들에게 입소문 난 클래스 중 하나다.",
"애피타이저부터 디저트까지 모두 배울 수 있으며 메뉴는 제철 식재료나 요일에 따라 변경되기 때문에 홈페이지에서 미리 확인하는 것이 좋다.",
"오스트리아 티롤주의 주도인 인스부르크는 알프스산맥으로 둘러싸여 그림 같은 풍광을 만끽할 수 있는 곳이다. 바나나는 숙성정도에 따라 색깔이 변하는데 색깔에 따라 각각의 효과가 다르다.",
"동계올림픽을 두 번이나 개최할 정도로 겨울철 스키 방문객들이 많지만 워낙 다양한 액티비티 덕분에 최근에는 여름 여행지로도 입소문을 타고 있다.",
"인스부르크에 가면 사계절 내내 즐길 수 있는 레포츠 시설이 도심 곳곳에 가득하다. 그중 베르기셀 스키 점프타워는 인스부르크 시내가 내려다보이는 베르기셀 산꼭대기에 위치한 랜드마크다.",
"베르기셀 스키 점프타워에는 여러 스포츠시설과 코브라 모양의 전망대, 카페를 포함한 공공 공간이 들어서 있다. 점프대는 스키를 즐기는 것뿐 아니라 알프스의 경치를 감상하기에도 제격이다.",
"눈앞에 펼쳐지는 시내 전경을 배경으로 바람을 가르며 스키 점프대를 내려오면 짜릿함과 전율이 오감을 자극한다. 세상에서 가장 추운 바다는 썰렁해.",
"2002년에 완공한 베르기셀은 세계적인 건축가 자하 하디드의 작품으로도 더욱 명성을 얻었다. 시즌마다 입장 시간이 다르니 홈페이지에서 일정을 확인하고 방문하는 것이 좋다.",
"뉴질랜드는 마오리족의 삶의 터전으로 유명하다. 마오리족은 뉴질랜드 로토루아 지역에서 자연과 함께 독특한 문화를 일구어냈으며 로토루아는 마오리 문화의 심장부라 할 수 있다.",
"마오리족은 조상 대대로 내려오는 오랜 신비와 자신의 문화에 대한 자부심을 바탕으로 여행객을 위한 체험 프로그램을 진행하고 있다.",
"체험은 마오리 마을에 머물면서 이들의 전통문화를 직접 경험하는 일정으로 진행한다. 전통 춤인 하카를 배우고, 전통 음식인 항이를 직접 만들고 즐길 수 있다.",
"항이는 채소와 고기를 큼직큼직하게 썬 다음 온천 열에 익힌 뒤 다양한 소스와 함께 먹는데 그 맛이 별미다. 또한 이들의 전통 수공예품을 배우는 아트 클래스에도 참여할 수 있다.",
"마오리족과 함께 살아보는 동안 마오리 문화를 체험하지 않고는 진정한 뉴질랜드를 느낄 수 없다는 명언을 온몸으로 느낄 수 있을 것이다.",
"마오리족의 전통을 즐기는 프로그램은 다양하다. 환영 의식인 포휘리부터 마오리족만의 문신인 타모코 등 이들의 예술까지 즐길 수 있다.",
"팜스테이는 전원 속 농가에 숙식하면서 농사 생활 문화 체험을 동시에 즐길 수 있는 여행 트렌드다. 혼자도 좋지만 특히 가족 단위 여행객에게 인기를 끌고 있다.",
"팜스테이를 제대로 즐기려면 대자연과 농장이 한데 어우러져야 한다. 자연 친화적인 도시이자 광활한 대지를 갖춘 미국 캘리포니아는 팜스테이로 안성맞춤이다.",
"이곳에서는 미국식 전통 가정집에서 일어나 아침에 직접 키운 닭에서 달걀도 가져오고 텃밭에서 채소도 수확하면서 전원생활을 즐길 수 있다.",
"그림 같은 시골 전경을 감상하거나 가족과 함께 신선한 과일을 직접 따는 일은 바쁜 일상에서 누릴 수 없는 힐링을 선사한다.",
"반려견 동반도 가능하고, 목장에서 유기농 음식을 만들거나 퀼트도 제작해보는 등 다양한 체험을 즐길 수 있다. 세상에서 가장 추운 바다는 썰렁해.",
"대부분의 팜스테이에는 과수원이나 텃밭 와이너리 등이 딸려 있어 다양한 체험이 가능하다. 특히 캘리포니아 전역에는 다양한 팜스테이 시설이 보물처럼 숨겨져 있다.",
]

var hideNow = document.getElementById('hide_now');

SubMenu1.onclick = function() {
    stop.click();

    var slicedPhrases = [];
    var repeatedPhrases = [];
    var addedPhrases = [];
    repeatCount = getRepeatCount();

    //loopCount = 2
    //for (var n = 0; n < loopCount; n++) {
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        for (repeatedPhrases of Phrases)
        addedPhrases.push(Array(repeatCount).fill(repeatedPhrases).join(""));
    //}

    FinalSliceNumber = 1
    slicedPhrases = addedPhrases.slice(0, FinalSliceNumber);
    doc.setValue(slicedPhrases.join("   "));

    if (hideNow.checked == true){setMarker_short_after();}
}

SubMenu2.onclick = function() {
    stop.click();

    var slicedPhrases = [];
    var repeatedPhrases = [];
    var addedPhrases = [];
    repeatCount = getRepeatCount();

    //loopCount = 2
    //for (var n = 0; n < loopCount; n++) {
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        for (repeatedPhrases of Phrases)
        addedPhrases.push(Array(repeatCount).fill(repeatedPhrases).join(""));
    //}

    FinalSliceNumber = 2
    slicedPhrases = addedPhrases.slice(0, FinalSliceNumber);
    doc.setValue(slicedPhrases.join("   \n\n"));

    if (hideNow.checked == true){setMarker_short_after();}
}

SubMenu3.onclick = function() {
    stop.click();

    var slicedPhrases = [];
    var repeatedPhrases = [];
    var addedPhrases = [];
    repeatCount = getRepeatCount();

    //loopCount = 2
    //for (var n = 0; n < loopCount; n++) {
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        for (repeatedPhrases of Phrases)
        addedPhrases.push(Array(repeatCount).fill(repeatedPhrases).join(""));
    //}

    FinalSliceNumber = 3
    slicedPhrases = addedPhrases.slice(0, FinalSliceNumber);
    doc.setValue(slicedPhrases.join("   \n\n"));

    if (hideNow.checked == true){setMarker_short_after();}
}

SubMenu4.onclick = function() {
    stop.click();

    var slicedPhrases = [];
    var repeatedPhrases = [];
    var addedPhrases = [];
    repeatCount = getRepeatCount();

    //loopCount = 2
    //for (var n = 0; n < loopCount; n++) {
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        for (repeatedPhrases of Phrases)
        addedPhrases.push(Array(repeatCount).fill(repeatedPhrases).join(""));
    //}

    FinalSliceNumber = 4
    slicedPhrases = addedPhrases.slice(0, FinalSliceNumber);
    doc.setValue(slicedPhrases.join("   \n\n"));

    if (hideNow.checked == true){setMarker_short_after();}
}


SubMenu5.onclick = function() {
    stop.click();

    var slicedPhrases = [];
    var repeatedPhrases = [];
    var addedPhrases = [];
    repeatCount = getRepeatCount();

    //loopCount = 2
    //for (var n = 0; n < loopCount; n++) {
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        for (repeatedPhrases of Phrases)
        addedPhrases.push(Array(repeatCount).fill(repeatedPhrases).join(""));
    //}

    FinalSliceNumber = 5
    slicedPhrases = addedPhrases.slice(0, FinalSliceNumber);
    doc.setValue(slicedPhrases.join("   \n\n"));

    if (hideNow.checked == true){setMarker_short_after();}
}

SubMenu6.onclick = function() {
    stop.click();

    var slicedPhrases = [];
    var repeatedPhrases = [];
    var addedPhrases = [];
    repeatCount = getRepeatCount();

    //loopCount = 2
    //for (var n = 0; n < loopCount; n++) {
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        Phrases.sort(() => Math.random() - 0.5);
        for (repeatedPhrases of Phrases)
        addedPhrases.push(Array(repeatCount).fill(repeatedPhrases).join(""));
    //}

    FinalSliceNumber = 6
    slicedPhrases = addedPhrases.slice(0, FinalSliceNumber);
    doc.setValue(slicedPhrases.join("   \n\n"));

    if (hideNow.checked == true){setMarker_short_after();}
}

function onChangeHideNow(){

if (stopped == false){  // PLAY가 진행중일때는 '항상' 버튼이 작동하지 않도록 하기 위한 루틴
    if (hideNow.checked == true){
        document.getElementById("hide_now").checked = false;
    } else {
        document.getElementById("hide_now").checked = true;
    }
}else {
        var lastLine = doc.lastLine();
        var lastLineLength = doc.getLine(lastLine).length;
        
        cursorTempFrom = {line: 0, ch: 0};
        cursorTempTo = {line: 0, ch: 0};
        cursorTempEnd = {line: lastLine, ch: lastLineLength};

        var checkbox = document.getElementById('hide_now');
        if (checkbox.checked == true){
            document.getElementById("hide_text").checked = true;
            setMarker(cursorTempFrom, cursorTempEnd);
        } else{
            clearMarker();
        }
}        
}

function setMarker_short_after() {
var lastLine = doc.lastLine();
var lastLineLength = doc.getLine(lastLine).length;

cursorTempFrom = {line: 0, ch: 0};
cursorTempTo = {line: 0, ch: 0};
cursorTempEnd = {line: lastLine, ch: lastLineLength};

setTimeout(function() {
    setMarker(cursorTempFrom, cursorTempEnd);
}, 100);
}
</script>
</html>
